
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
          <div class="title-group">
              <h5>{{model.id ? ('addLegalEntity.editEntity' | translate) : ('addLegalEntity.addEntity' | translate)}}</h5>
              <div class="spacer30"></div>
          </div>
        </div>
    </div>
    
    <div class="white-bg padding40">
        <div class="row">
        <form  [formGroup]="addDataForm" (ngSubmit)="add(addDataForm.value)">
          <div class="col-xl-12 col-lg-12 col-md-12 col-12">
              <div class="row">
                
                <div class="col-6">
                  <div class="form-group-2">
                    <h5>Legal Entity Information</h5>
                  </div>
                </div>
                <div class="col-6">
                    <div class="btn-cont text-right">
                        <button *ngIf="!model.id" type="submit" [disabled]="!addDataForm.valid" class="btn btn-primary">{{'addForm.addBtn' | translate}}</button>
                        <button *ngIf="model?.id" type="submit" class="btn btn-primary">{{'addForm.updateBtn' | translate}}</button>
                    </div>
                </div>
                <div class="col-12">
                    <div class="spacer40"></div>
                </div>
                <div class="col-12">
                    <div class="form-group-2">
                      <label>Commercial Name<span class="color-red">*</span></label>
                      <input autocomplete="off" minlength="1" maxlength="30" [pattern]="constant.onlyWhiteSpaces" required type="text" 
                        class="form-control" formControlName="comm_name" name="comm_name">
                    </div>
                </div>
                <div class="col-12">
                    <div class="form-group-2">
                      <label>Legal Name <span class="color-red">*</span></label>
                      <input autocomplete="off" minlength="1" maxlength="50" [pattern]="constant.onlyWhiteSpaces" required type="text" 
                        class="form-control" formControlName="legal_name" name="legal_name">
                    </div>
                </div>
                <div class="col-12">
                    <div class="form-group-2">
                        <label>{{'addForm.emailId' | translate}} <span class="color-red">*</span></label>
                        <input (keydown.space)="$event.preventDefault();" autocomplete="off" required [pattern]="constant.emailPattern" 
                          type="email" class="form-control" formControlName="email" name="email">
                      </div>
                </div>
                <div class="col-12">
                    <div class="form-group-2">
                      <label>{{'addForm.contactNumber' | translate}} <span class="color-red">*</span></label>
                      <input minlength="8" maxlength="15" autocomplete="off" type="text" 
                        [pattern]="constant.phonePattern" class="form-control" id="phone" required 
                        formControlName="phone" name="phone"
                            ng2TelInput [ng2TelInputOptions]="initialCountry" (countryChange)="onCountryChange($event)" />
                    </div>
                </div>
                <div class="col-12">
                    <div class="form-group-2">
                      <label>{{'addForm.address' | translate}} <span class="color-red">*</span></label>
                      <input placeholder="{{'addForm.placeholder.searchForAddress' | translate}}" 
                      autocorrect="off" type="text" required
                      class="form-control" name="address" formControlName="address">
                    </div>
                </div>
                <div class="col-12">
                    <div class="form-group-2">
                      <label>{{'addCollection.fedralTaxPayerRegistry' | translate}} 
                        <!-- <span class="color-red">*</span> -->
                      </label>
                      <input autocomplete="off" minlength="12" maxlength="13" [pattern]="constant.onlyWhiteSpaces" type="text" 
                      class="form-control" formControlName="fed_tax_pay" name="fed_tax_pay">
                    </div>
                </div>
                <div class="col-12">
                  <div class="form-group-2">
                    <label>{{'addForm.developerName' | translate}}</label>
                    <select name="developer_id" class="form-control" formControlName="developer_id">
                      <option value="">{{'addForm.selectDeveloper' | translate}}</option>
                      <option *ngFor="let d of all_developers" value="{{d.id}}">{{d.name}}</option>
                    </select>
                  </div>
                </div>
  
                <div class="col-12">
                  <label>{{'addCollection.bankAccount' | translate}}<span class="color-red">*</span>
                    <span class="pull-right"><a class="add" (click)="addLegalEntityBank($event)" href="javascript://">{{'addCollection.addNewBankAccount' | translate}}</a></span>
                  </label>
                  <div formArrayName="legal_entity_banks">
                      <ng-container *ngFor="let lebanks of addDataForm.get('legal_entity_banks')['controls']; let i=index">
                          
                  <div class="row" [formGroupName]="i">
                    <div class="col-lg-3 col-md-6 col-sm-6 col-12">
                        <div class="form-group-3">
                      <label>{{'addCollection.bankName' | translate}}</label>
                      <div class="clearfix"></div>
                      <input required autocomplete="off" minlength="1" maxlength="30" class="form-control" type="text" name="bank_name" formControlName="bank_name">
                    </div>
                  </div>
                  <div class="col-lg-3 col-md-6 col-sm-6 col-12">
                      <div class="form-group-3">
                      <label>{{'addCollection.accountNumber' | translate}}</label>
                      <div class="clearfix"></div>
                      <input required autocomplete="off" class="form-control" type="number" minlength="10" 
                      maxlength="20" min="0" name="account_number" formControlName="account_number">
                    </div>
                  </div>
                  <div class="col-lg-2 col-md-6 col-sm-6 col-12">
                      <div class="form-group-3">
                      <label>{{'addCollection.clabeSwift' | translate}}</label>
                      <div class="clearfix"></div>
                      <input required autocomplete="off" class="form-control" type="text" name="swift" formControlName="swift">
                    </div>
                  </div>
                  <div class="col-lg-2 col-md-6 col-sm-6 col-12">
                      <div class="form-group-3">
                      <label>{{'addCollection.currency' | translate}}</label>
                      <div class="clearfix"></div>
                      <select required name="currency_id" required class="form-control" formControlName="currency_id">
                        <option value="">{{'addCollection.currency' | translate}}</option>
                        <option value="{{c.id}}" *ngFor="let c of currencies">{{ c?.code }} | {{c?.currency}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-lg-2 col-md-6 col-sm-6 col-12">
                      <div class="form-group-3">
                      <label>{{'addCollection.remove' | translate}}</label>
                      <div class="clearfix"></div>
                      <button type="button" (click)="removeLegalEntityBank($event, i)">{{'addCollection.remove' | translate}}</button>
                    </div>
                  </div>
                </div>
              </ng-container>
            </div>
    
                </div>
                </div>
  
                <div class="row" formGroupName="legal_rep">
                  <div class="col-12">
                      <div class="spacer40"></div>
                  </div>
                  <div class="col-12">
                    <div class="form-group-2">
                      <h5>{{'addCollection.legalRepresentativeInfo' | translate}}</h5>
                     </div>
                  </div>
                  <div class="col-12">
                      <div class="form-group-2">
                        <label>{{'addForm.name' | translate}} <span class="color-red">*</span></label>
                        <input autocomplete="off" minlength="1" maxlength="30" [pattern]="constant.onlyWhiteSpaces" required type="text" 
                          class="form-control" formControlName="name" name="name1">
                      </div>
                  </div>
                  <div class="col-12">
                      <div class="form-group-2">
                        <label>{{'addForm.contactNumber' | translate}} <span class="color-red">*</span></label>
                        <input minlength="8" maxlength="15" autocomplete="off" type="text" [pattern]="constant.phonePattern" class="form-control" id="phone1" 
                          required formControlName="phone" name="phone1"
                              ng2TelInput [ng2TelInputOptions]="initialCountry" (countryChange)="onCountryChange($event)" />
                      </div>
                  </div>
                <div class="col-12">
                    <div class="form-group-2">
                      <label>{{'addForm.emailId' | translate}} <span class="color-red">*</span></label>
                      <input (keydown.space)="$event.preventDefault();" autocomplete="off" required [pattern]="constant.emailPattern" 
                        type="email" class="form-control" formControlName="email" name="email1">
                    </div>
                </div>
                <div class="col-12">
                    <div class="form-group-2">
                      <label>{{'addCollection.fedralTaxPayerRegistry' | translate}} 
                        <!-- <span class="color-red">*</span> -->
                      </label>
                      <input autocomplete="off" minlength="12" maxlength="13" [pattern]="constant.onlyWhiteSpaces" type="text" class="form-control" 
                      formControlName="fed_tax_pay" name="fed_tax_pay1">
                    </div>
                </div>

                <div class="col-12">
                    <label>{{'addCollection.bankAccount' | translate}}<span class="color-red">*</span>
                      <span class="pull-right"><a class="add" (click)="addLegalRepBank($event)" href="javascript://">{{'addCollection.addNewBankAccount' | translate}}</a></span>
                    </label>
                <div formArrayName="legal_rep_banks">
                    <ng-container *ngFor="let lrepbanks of addDataForm.get('legal_rep').get('legal_rep_banks')['controls']; let i=index">
                        
                <div class="row" [formGroupName]="i">
                  <div class="col-lg-3 col-md-6 col-sm-6 col-12">
                      <div class="form-group-3">
                    <label>{{'addCollection.bankName' | translate}}</label>
                    <div class="clearfix"></div>
                    <input required autocomplete="off" minlength="1" maxlength="30" class="form-control" type="text" name="bank_name" formControlName="bank_name">
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6 col-12">
                    <div class="form-group-3">
                    <label>{{'addCollection.accountNumber' | translate}}</label>
                    <div class="clearfix"></div>
                    <input required autocomplete="off" class="form-control" type="number" minlength="10" 
                    maxlength="20" min="0" name="account_number" formControlName="account_number">
                  </div>
                </div>
                <div class="col-lg-2 col-md-6 col-sm-6 col-12">
                    <div class="form-group-3">
                    <label>{{'addCollection.clabeSwift' | translate}}</label>
                    <div class="clearfix"></div>
                    <input required autocomplete="off" class="form-control" type="text" name="swift" formControlName="swift">
                  </div>
                </div>
                <div class="col-lg-2 col-md-6 col-sm-6 col-12">
                    <div class="form-group-3">
                    <label>{{'addCollection.currency' | translate}}</label>
                    <div class="clearfix"></div>
                    <select required name="currency_id" required class="form-control" formControlName="currency_id">
                      <option value="">{{'addCollection.currency' | translate}}</option>
                      <option value="{{c.id}}" *ngFor="let c of currencies">{{ c?.code }} | {{c?.currency}}</option>
                    </select>
                  </div>
                </div>
                <div class="col-lg-2 col-md-6 col-sm-6 col-12">
                    <div class="form-group-3">
                    <label>{{'addCollection.remove' | translate}}</label>
                    <div class="clearfix"></div>
                    <button type="button" (click)="removeLegalRepBank($event, i)">{{'addCollection.remove' | translate}}</button>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
          </div>
              </div>
          </div>
          </form>
        </div>
    </div>
    
<!--   
<a #openDeveloperModel class="btn-third btn btn-block" data-target="#developer-list" data-toggle="modal"></a>
<div class="modal" id="developer-list">
  <div class="modal-dialog">
    <div class="modal-content notary-avail">
      <div class="modal-header popup-header">
        <h4 class="modal-title">{{'addForm.developer.selectDeveloper' | translate}}</h4>
        <button type="button" class="close" data-dismiss="modal" #closeDeveloperModel>&times;</button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-8 col-6">
            <input style="max-width:200px" autocomplete="off" [(ngModel)]="name" class="form-control" type="text"
              name="keyword" placeholder="{{'addForm.placeholder.search' | translate}}">
          </div>
          <div class="col-md-4 col-5 btn-cont">
            <a class="btn btn-primary pull-right" href="javascript://" (click)="selectDeveloper(name, 2)">Search</a>
          </div>
        </div>
        <div class="spacer40"></div>
        <div class="modal-table-data" malihu-scrollbar [scrollbarOptions]="scrollbarOptions">
          <table class="table">
            <tr *ngFor="let item of all_developers">
              <td>
                <div class="n-avail-profile">
                  <img [src]="item.image| img:'thumb'" onerror='src="assets/img/default_img.png"' alt="img">
                  <div class="n-avail-info">
                    <p class="p12">{{item.name}}</p>
                    <p class="p10">{{'addForm.developer.phone' | translate}} : {{item.dial_code ? item.dial_code : constant.dial_code}}-{{item.phone}}</p>
                  </div>
                </div>
              </td>
              <td>
                <label class="cust-check-bx float-right">
                  <input type="radio" name="notary_id" (click)="setDeveloper(item)">
                  <span class="checkmark"></span>
                </label>
              </td>
            </tr>
            <tr *ngIf="all_developers?.length<1">
              <p class="show-not-found">{{'addForm.developer.notFound' | translate}}</p>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</div> -->
