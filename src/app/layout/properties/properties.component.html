<div class="container-fluid">
   <div class="row">
      <div class="col-md-4">
         <div class="form-group">
            <p class="p16">{{'viewProperty.label' | translate}}</p>
         </div>
      </div>
   </div>
   <div class="row">
      <div class="offset-md-4"></div>
      <div class="col-md-8 col-12">
         <div class="cust-tabs-2">
            <ul class="nav nav-tabs float-right">
               <li class="nav-item">
                  <a [ngClass]="{'active':parameter.dash_flag == 1}" (click)="changeFlag(1)" class="nav-link"
                     data-toggle="tab" href="#tw">{{'filters.time.thisWeek' | translate}}</a>
               </li>
               <li class="nav-item">
                  <a [ngClass]="{'active':parameter.dash_flag == 2}" (click)="changeFlag(2)" class="nav-link"
                     data-toggle="tab" href="#tm">{{'filters.time.thisMonth' | translate}}</a>
               </li>
               <li class="nav-item">
                  <a [ngClass]="{'active':parameter.dash_flag == 3}" (click)="changeFlag(3)" class="nav-link"
                     data-toggle="tab" href="#lm">{{'filters.time.lastMonth' | translate}}</a>
               </li>
               <li class="nav-item">
                  <a [ngClass]="{'active':parameter.dash_flag == 4}" (click)="changeFlag(4)" class="nav-link"
                     data-toggle="tab" href="#lt">{{'filters.time.lifetime' | translate}}</a>
               </li>
               <li class="nav-item">
                  <a [ngClass]="{'active':parameter.dash_flag == 5}" (click)="changeFlag(5)" class="nav-link"
                     data-toggle="tab" href="#cust">{{'filters.time.custom.label' | translate}}</a>
               </li>
            </ul>
         </div>
      </div>
   </div>

   <div class="row">
      <div class="col-12">
         <div *ngIf="parameter.dash_flag == 5" class="row">
            <div class="offset-lg-7"></div>
            <div class="col-lg-2 col-md-2 col-sm-5 col-5">
               <div class="form-group marginB0">
                  <label>{{'filters.time.custom.from' | translate}}</label>
                  <p-calendar [locale]="locale" showIcon="true" [(ngModel)]="parameter.min" [maxDate]="today"
                     showButtonBar="true" [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2040">
                  </p-calendar>
               </div>
            </div>
            <div class="col-lg-2 col-md-2 col-sm-5 col-5">
               <div class="form-group marginB0">
                  <label>{{'filters.time.custom.to' | translate}}</label>
                  <p-calendar [locale]="locale" showIcon="true" [(ngModel)]="parameter.max" [minDate]="parameter.min"
                     [maxDate]="today" showButtonBar="true" [monthNavigator]="true" [yearNavigator]="true"
                     yearRange="2000:2040"></p-calendar>
               </div>
            </div>
            <div class="col-lg-1 col-md-2 col-sm-2 col-6">
               <div class="form-group btn-cont">
                  <label class="addMT3">&nbsp;</label>
                  <button class="btn btn-calender" href="javascript://" (click)="getListing()"
                     [disabled]="!parameter.min || !parameter.max">{{'filters.time.custom.applyBtn' |
                     translate}}</button>
               </div>
            </div>
         </div>
      </div>
   </div>

   <div class="row">
      <div class="col-lg-2 col-md-2">
         <div class="form-group">
            <label>{{'filters.location.country' | translate}}</label>
            <select class="form-control" (change)="onCountryChange($event.target.value)">
               <option value="0">{{'filters.location.allOption' | translate}}</option>
               <option *ngFor="let item of location.countries" [value]="item.id">{{item.name}}</option>
            </select>
         </div>
      </div>
      <div class="col-lg-2 col-md-2">
         <div class="form-group">
            <label>{{'filters.location.state' | translate}}</label>
            <select class="form-control" (change)="onStateChange($event.target.value)">
               <option value="0">{{'filters.location.allOption' | translate}}</option>
               <option *ngFor="let item of location.states" [value]="item.id">{{item.name}}</option>
            </select>
         </div>
      </div>
      <div class="col-lg-2 col-md-2">
         <div class="form-group">
            <label>{{'filters.location.city' | translate}}</label>
            <select class="form-control" (change)="onCityChange($event.target.value)">
               <option value="0">{{'filters.location.allOption' | translate}}</option>
               <option *ngFor="let item of location.cities" [value]="item.id">{{item.name}}</option>
            </select>
         </div>
      </div>

      <div class="col-lg-2 col-md-2">
         <div class="form-group">
            <label>{{'filters.location.locality' | translate}}</label>
            <select class="form-control" (change)="getLocalityBuildings($event.target.value)">
               <option value="0">{{'filters.location.allOption' | translate}}</option>
               <option *ngFor="let item of location.localities" [value]="item.id">{{item.name}}</option>
            </select>
         </div>
      </div>

      <div class="col-lg-2 col-md-2">
         <div class="form-group marginB0">
            <label>{{'filters.location.building' | translate}}</label>
            <select class="form-control" (change)="setBuilding($event.target.value)">
               <option value="0">{{'filters.location.allOption' | translate}}</option>
               <option *ngFor="let building of parameter.buildings" value="{{building.id}}">{{building.name}}</option>
            </select>
         </div>
      </div>

      <div class="col-lg-1 col-md-2">
         <div class="form-group btn-cont">
            <label style="display: block; margin-top: 3px;">&nbsp;</label>
            <button type="button" (click)="getListing()"
               class="btn btn-primary-new width100P P86">{{'filters.location.applyBtn' | translate}}</button>
         </div>
      </div>

      <div class="col-lg-1 col-md-2">
         <div class="form-group btn-cont">
            <label style="display: block; margin-top: 3px;">&nbsp;</label>
            <button type="button" (click)="resetFilters()"
               class="btn btn-primary-new width100P P86">{{'filters.location.resetBtn' | translate}}</button>
         </div>
      </div>
   </div>
   <!-- <div class="row">
      <div class="col-md-4">
      <div class="form-group">
         <p class="p16">Manage Properties</p>
         </div>
      </div>
      <div class="col-md-2">
   <div class="form-group">
   <label>Country</label>
      <select class="form-control" (change)="onCountryChange($event.target.value)">
         <option value="0">All</option>
         <option *ngFor="let item of location.countries" [value]="item.id">{{item.name}}</option>
      </select>
   </div>
   </div>
   <div class="col-md-2">
   <div class="form-group">
   <label>State</label>
      <select class="form-control" (change)="onStateChange($event.target.value)">
         <option value="0">All</option>
         <option *ngFor="let item of location.states" [value]="item.id">{{item.name}}</option>
      </select>
   </div>
   </div>
   <div class="col-md-2">
      <div class="form-group">
      <label>City</label>
         <select class="form-control" (change)="onCityChange($event.target.value)">
         <option value="0">All</option>
         <option *ngFor="let item of location.cities" [value]="item.id">{{item.name}}</option>
         </select>
      </div>
   </div>

   <div class="col-md-2">
   <div class="form-group">
   <label>Locality</label>
   <select class="form-control" (change)="onLocalityChange($event.target.value)">
         <option value="0">All</option>
         <option *ngFor="let item of location.localities" [value]="item.id">{{item.name}}</option>
      </select>
   </div>
   </div>
   </div>

   <div class="row">
         <div class="col-md-12">
            <div class="cust-tabs-2">
               <ul class="nav nav-tabs float-right">
                  <li class="nav-item">
                     <a [ngClass]="{'active':parameter.dash_flag == 1}" (click)="parameter.dash_flag=1;getListing()" class="nav-link" data-toggle="tab" href="#tw">This Week</a>
                  </li>
                  <li class="nav-item">
                     <a [ngClass]="{'active':parameter.dash_flag == 2}" (click)="parameter.dash_flag=2;getListing()" class="nav-link" data-toggle="tab" href="#tm">This Month</a>
                  </li>
                  <li class="nav-item">
                     <a [ngClass]="{'active':parameter.dash_flag == 3}" (click)="parameter.dash_flag=3;getListing()" class="nav-link" data-toggle="tab" href="#lm">Last Month</a>
                  </li>
                  <li class="nav-item">
                     <a [ngClass]="{'active':parameter.dash_flag == 4}" (click)="parameter.dash_flag=4;getListing()" class="nav-link" data-toggle="tab" href="#lt">Lifetime</a>
                  </li>
                  <li class="nav-item">
                     <a [ngClass]="{'active':parameter.dash_flag == 5}" (click)="parameter.dash_flag=5" class="nav-link" data-toggle="tab" href="#cust">Custom</a>
                  </li>
               </ul>
            </div>
         </div>
         <div class="col-12">
            <div *ngIf="parameter.dash_flag == 5" class="pull-right row">
               <div class="col-lg-4 col-md-4 col-sm-5 col-5">
               <div class="form-group marginB0">
                     <label>From:</label>
                     <p-calendar showIcon="true" [(ngModel)]="parameter.min" [maxDate]="today" showButtonBar="true" [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2040"></p-calendar>
               </div>
               </div>
               <div class="col-lg-4 col-md-4 col-sm-5 col-5">
               <div class="form-group marginB0">
                     <label>To:</label>
                     <p-calendar showIcon="true" [(ngModel)]="parameter.max" [minDate]="parameter.min" [maxDate]="today" showButtonBar="true" [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2040"></p-calendar>
               </div>
               </div>
               <div class="col-lg-4 col-md-4 col-sm-2 col-6">
               <div class="form-group btn-cont">
                     <label class="addMT3">&nbsp;</label>
                     <button class="btn btn-calender" href="javascript://" (click)="getListing()"
               [disabled]="!parameter.min || !parameter.max">Apply</button>
               </div>
               </div>
            </div>
         </div>
      </div> -->

   <div class="cust-tabs">
      <div class="row flex-wrap-reverse">

         <div class="col-xl-4 col-lg-12 col-md-12 col-sm-12 col-12">
            <ul class="nav nav-tabs">
               <li class="nav-item">
                  <a [ngClass]="{'active':parameter.flag==3}" (click)="changePropertyFlag(3)"
                     class="nav-link cursor-pointer">{{'filters.flag.approved' | translate}}</a>
               </li>
               <li class="nav-item">
                  <a [ngClass]="{'active':parameter.flag==4}" (click)="changePropertyFlag(4)"
                     class="nav-link cursor-pointer">{{'filters.flag.unapproved' | translate}}</a>
               </li>
               <li class="nav-item">
                  <a [ngClass]="{'active':parameter.flag==2}" (click)="changePropertyFlag(2)"
                     class="nav-link cursor-pointer">{{'filters.flag.pendingReview' | translate}}</a>
               </li>
               <li class="nav-item">
                  <a [ngClass]="{'active':parameter.flag==1}" (click)="changePropertyFlag(1)"
                     class="nav-link cursor-pointer">{{'filters.flag.inDraft' | translate}}</a>
               </li>
               <!-- <li class="nav-item">
                  <a [ngClass]="{'active':parameter.flag==5}" (click)="changePropertyFlag(5)" class="nav-link cursor-pointer" >{{'filters.flag.sellerRequest' | translate}}</a>
               </li> -->
            </ul>
         </div>
         <div class="col-xl-2 col-lg-12 col-md-12 col-sm-12 col-12">
            <div class="add-new text-left">
               <a class="btn" #modalOpen data-toggle="modal" data-target="#advancedSearch"
                  routerLink="/dashboard/properties/add-bulk-property/0/0">
                  {{'advanceSearch.advancedSearch' | translate}}</a>
            </div>
         </div>
         <div class="col-xl-2 col-lg-12 col-md-12 col-sm-12 col-12">
            <div class="add-new text-left">
               <a class="btn" (click)="getExportlisting()" href="javascript://">
                  {{'table.exportDataBtn' | translate}}</a>
            </div>
         </div>
         <div class="col-xl-2 col-lg-12 col-md-12 col-sm-12 col-12">
            <div class="add-new text-center">
               <a *ngIf="admin?.admin_acl['Property Management']?.can_create==1" class="btn" href="javascript://"
                  routerLink="/dashboard/properties/add-bulk-property/0/0">{{'viewProperty.addBulkProperty' |
                  translate}}</a>
            </div>
         </div>
         <div class="col-xl-2 col-lg-12 col-md-12 col-sm-12 col-12">
            <div class="add-new text-right">
               <a *ngIf="admin?.admin_acl['Property Management']?.can_create==1" class="btn" href="javascript://"
                  routerLink="/dashboard/properties/add-property/0/0">{{'viewProperty.addNewProperty' | translate}}</a>
            </div>
         </div>
      </div>
      <div class="tab-content white-bg">
         <div class="tab-pane active">
            <div class="tabel-section">
               <div class="table-responsive">
                  <table class="table table-striped table-align-left">
                     <tr>
                        <th style="width:10%; text-align:left;">
                           <div class="table-search">
                              <label>{{'table.th.nameOfBuilding' | translate}}</label>
                              <div class="searh-3">
                                 <input class="width100px" type="text" [(ngModel)]="parameter.keyword"
                                    (keyup.enter)="getListing()">
                                 <button *ngIf="parameter.keyword" (click)="getListing()"><i
                                       class="fa fa-search"></i></button>
                              </div>
                           </div>
                        </th>
                        <th style="width:10%; text-align:left;">
                           <div class="table-search">
                              <label>{{'table.th.nameOfTower' | translate}}</label>
                              <div class="searh-3">
                                 <input class="width100px" type="text" [(ngModel)]="parameter.tower_name"
                                    (keyup.enter)="getListing()">
                                 <button *ngIf="parameter.tower_name" (click)="getListing()"><i
                                       class="fa fa-search"></i></button>
                              </div>
                           </div>
                        </th>
                        <th style="width:10%; text-align:left;">
                           <div class="table-search">
                              <label>{{'table.th.floor' | translate}}</label>
                              <select [(ngModel)]="parameter.floor_num" (change)="getListing()">
                                 <option value="">{{'table.th.allFloors' | translate}}</option>
                                 <option *ngFor="let c of floors" value="{{c.id}}">
                                    {{c.name}}
                                 </option>
                              </select>
                           </div>
                        </th>
                        <th style="width:10%; text-align:left;">
                           <div class="table-search">
                              <label>{{'table.th.apartment' | translate}}
                                 <a (click)="sort_by(4)" href="javascript://"><img
                                       [ngClass]="{'upsidedown':parameter.sort_by==4}" src="assets/img/top-arrow.png"
                                       alt="img"></a>
                              </label>
                              <div class="searh-3">
                                 <input class="width120px" type="text" [(ngModel)]="parameter.name"
                                    (keyup.enter)="getListing()">
                                 <button *ngIf="parameter.name" (click)="getListing()"><i
                                       class="fa fa-search"></i></button>
                              </div>
                           </div>
                        </th>
                        <th style="width:10%; text-align:left;">
                           <div class="table-search">
                              <label>{{'table.th.model' | translate}}</label>
                              <div class="searh-3">
                                 <input class="width120px" type="text" [(ngModel)]="parameter.configuration_name"
                                    (keyup.enter)="getListing()">
                                 <button *ngIf="parameter.configuration_name" (click)="getListing()"><i
                                       class="fa fa-search"></i></button>
                              </div>
                           </div>
                        </th>
                        <th style="width:10%; text-align:left;">
                           <div class="table-search">
                              <label>{{'table.th.configuration' | translate}}</label>
                              <select [(ngModel)]="parameter.configuration_id" (change)="getListing()">
                                 <option value="0">{{'table.th.allConfiguration' | translate}}</option>
                                 <option *ngFor="let c of configurations" value="{{c.id}}">
                                    <!-- {{c.name}} -->
                                    <span *ngIf="c.status">
                                       <app-property-configuration *ngIf="c" [configuration]="c">
                                       </app-property-configuration>
                                    </span>
                                 </option>
                              </select>
                           </div>
                        </th>
                        <th style="width:8%;vertical-align:top;">
                           <div (click)="sort_by(1)" class="d-flex table-search">
                              <label>{{'table.th.price' | translate}}</label>
                              <a href="javascript://"><img
                                    [ngClass]="{'upsidedown':parameter.sort_by==1 && parameter.sort_by_order==0}"
                                    src="assets/img/top-arrow.png" alt="img"></a>
                           </div>
                        </th>
                        <th style="width:8%;vertical-align:top;">
                           <div (click)="sort_by(5)" class="d-flex table-search">
                              <label>{{'table.th.carpetArea' | translate}}</label>
                              <a href="javascript://"><img
                                    [ngClass]="{'upsidedown':parameter.sort_by==5 && parameter.sort_by_order==0}"
                                    src="assets/img/top-arrow.png" alt="img"></a>
                           </div>
                        </th>
                        <th *ngIf="parameter.flag!=5" style="width:5%;vertical-align:top;">
                           <div class="table-search">
                              <label>{{'table.th.commercializedBySOZU' | translate}}</label>
                              <select class="width100px" [(ngModel)]="parameter.is_commercialized" (change)="getListing()">
                                 <option value="">{{'table.th.all' | translate}}</option>
                                 <option value="1">{{'table.th.yes' | translate}}</option>
                                 <option value="0">{{'table.th.no' | translate}}</option>
                              </select>
                           </div>
                        </th>
                        <th style="width:4%;vertical-align:top;">
                           <div class="d-flex table-search">
                              <label>{{'table.th.editPrice' | translate}}</label>
                           </div>
                        </th>
                        <th style="width:8%;vertical-align:top;">
                           <div (click)="sort_by(1)" class="d-flex table-search">
                              <label>{{'table.th.agentCommission' | translate}}</label>
                           </div>
                        </th>
                        <th style="width:4%;vertical-align:top;">
                           <div class="d-flex table-search">
                              <label>{{'table.th.editCommission' | translate}}</label>
                           </div>
                        </th>
                        <th style="width:8%;vertical-align:top;">
                           <div (click)="sort_by(1)" class="d-flex table-search">
                              <label>{{'table.th.totalSozuCommission' | translate}}</label>
                           </div>
                        </th>
                        <th style="width:4%;vertical-align:top;">
                           <div class="d-flex table-search">
                              <label>{{'table.th.editCommission' | translate}}</label>
                           </div>
                        </th>
                        <th style="width:4%;vertical-align:top;">
                           <div (click)="sort_by(3)" class="d-flex table-search">
                              <label>{{'table.th.leads' | translate}}</label>
                              <a href="javascript://"><img
                                    [ngClass]="{'upsidedown':parameter.sort_by==3 && parameter.sort_by_order==0}"
                                    src="assets/img/top-arrow.png" alt="img"></a>
                           </div>
                        </th>
                        <th style="width:5%;vertical-align:top;" *ngIf="parameter.flag==5">
                           <div class="d-flex table-search">
                              <label>{{'table.th.viewSellerRequest' | translate}}</label>
                           </div>
                        </th>
                        <th *ngIf="parameter.flag!=5" style="width:5%;vertical-align:top;">
                           <div class="table-search">
                              <label>{{'table.th.changeBuyer' | translate}}</label>
                              <div class="searh-3">
                                 <input class="width100px" type="text" [(ngModel)]="parameter.buyer_name"
                                    (keyup.enter)="getListing()">
                                 <button *ngIf="parameter.seller_name" (click)="getListing()"><i
                                       class="fa fa-search"></i></button>
                              </div>
                           </div>
                        </th>
                        <th *ngIf="parameter.flag!=5" style="width:5%;vertical-align:top;">
                           <div class="table-search">
                              <label>{{'table.th.changeSeller' | translate}}</label>
                              <div class="searh-3">
                                 <input class="width100px" type="text" [(ngModel)]="parameter.seller_name"
                                    (keyup.enter)="getListing()">
                                 <button *ngIf="parameter.seller_name" (click)="getListing()"><i
                                       class="fa fa-search"></i></button>
                              </div>
                           </div>
                        </th>
                        <th *ngIf="parameter.flag!=5" style="width:6%;vertical-align:top;">
                           <div class="table-search">
                              <label>{{'table.th.linkUnlinkAgent' | translate}}</label>
                              <!-- <div class="searh-3">
                                    <input class="width100px" type="text" [(ngModel)]="parameter.name" (keyup.enter)="getListing()" >
                                    <button *ngIf="parameter.name" (click)="getListing()"><i class="fa fa-search"></i></button>
                                 </div> -->
                           </div>
                        </th>
                        <th *ngIf="parameter.flag!=5" style="width:5%;vertical-align:top;">
                           <div class="table-search">
                              <label>{{'table.th.changeAvailability' | translate}}</label>
                              <select [(ngModel)]="parameter.availability_filter" (change)="getListing()">
                                 <option value="0">{{'table.th.all' | translate}}</option>
                                 <option value="1">{{'table.th.buy' | translate}}</option>
                                 <option value="2">{{'table.th.rent' | translate}}</option>
                                 <option value="3">{{'table.th.inventory' | translate}}</option>
                              </select>
                           </div>
                        </th>
                        <th *ngIf="parameter.flag!=5" style="width:5%;vertical-align:top;">
                           <div class="table-search">
                              <label>{{'table.th.isPropertySold' | translate}}</label>
                              <select class="width100px" [(ngModel)]="parameter.sold_filter" (change)="getListing()">
                                 <option value="0">{{'table.th.all' | translate}}</option>
                                 <option value="1">{{'table.th.yes' | translate}}</option>
                                 <option value="2">{{'table.th.no' | translate}}</option>
                              </select>
                           </div>
                        </th>
                        <th *ngIf="parameter.flag!=5" style="width:5%;vertical-align:top;">
                           <div class="table-search">
                              <label>{{'table.th.linkedCollection' | translate}}</label>
                           </div>
                        </th>
                        <th style="width:10%;" *ngIf="parameter.flag!=5">
                           <div class="table-search">
                              <label>{{'table.th.actions.label' | translate}}</label>
                              <select [(ngModel)]="parameter.action_filter" (change)="getListing()">
                                 <option value="0">{{'table.th.actions.all' | translate}}</option>
                                 <option value="3">{{'table.th.actions.featured' | translate}}</option>
                                 <option value="1">{{'table.th.actions.blocked' | translate}}</option>
                                 <option value="2">{{'table.th.actions.unblocked' | translate}}</option>
                              </select>
                           </div>
                        </th>
                     </tr>

                     <tr
                        *ngFor="let p of items | paginate: { itemsPerPage: parameter.itemsPerPage, currentPage: parameter.page, totalItems: total }; let i=index">
                        <td class="cursor-pointer" title="{{'table.title.clickToViewDetails' | translate}}"
                           (click)="viewPropertyDetails(p.id, p)">
                           <!-- routerLink="/dashboard/properties/details/{{p.id}}" -->
                           <strong>{{p?.building?.name || ('table.tr.td.NA' | translate)}}</strong>
                           <div class="clearfix"></div>
                           <small *ngIf="p.quantity > 0">
                              {{p.quantity}}
                              <span *ngIf="p.quantity == 1">property</span>
                              <span *ngIf="p.quantity > 1">properties</span>
                           </small>
                        </td>
                        <td><span>{{p?.building_towers ? p?.building_towers?.tower_name : ('table.tr.td.NA' |
                              translate)}}</span></td>
                        <td><span>{{p?.building_towers?.tower_name
                              ? (p?.floor_num == 0 ? ('addCollection.groundFloor' | translate) : ('addCollection.floor'
                              | translate) + ' ' + p?.floor_num)
                              : ('table.tr.td.NA' | translate)}}</span></td>
                        <td><span>{{p?.name || ('table.tr.td.NA' | translate)}}</span></td>
                        <td>
                           <span [style.textAlign]="'center'">
                              <b>{{p?.building_configuration?.name || ('table.tr.td.NA' | translate)}}</b>
                           </span>
                        </td>
                        <td>
                           <app-property-configuration *ngIf="p?.building_configuration"
                              [configuration]="p.building_configuration.config"></app-property-configuration>
                        </td>
                        <td><span>{{p.min_price | price}}</span></td>
                        <!-- <td><span>{{p?.carpet_areas && p?.carpet_areas?.length>0 ? (p?.carpet_areas[0]?.area| number : '1.2-2') : 0.00}}</span></td> -->
                        <td><span>{{p?.max_area ? p.max_area : 0.00}}</span></td>
                        <td><span>{{p?.is_commercialized ? ( 'table.th.yes' | translate ): ( 'table.th.no' | translate ) }}</span></td>
                        <td><span>
                              <button (click)="editPricePopup(p, i)"
                                 [disabled]="admin?.admin_acl['Property Management']?.can_update==0"
                                 title="{{'table.title.editPrice' | translate}}" class="action-icon"><img
                                    src="assets/img/edit.png" alt="img"></button>
                           </span></td>
                        <td><span>{{p.broker_commision | percentage}}</span></td>
                        <td><span>
                              <button (click)="editAgentCommissionPopup(p, i, true)"
                                 [disabled]="admin?.admin_acl['Property Management']?.can_update==0"
                                 title="{{'table.title.editPrice' | translate}}" class="action-icon"><img
                                    src="assets/img/edit.png" alt="img"></button>
                           </span></td>

                        <td><span>{{p?.total_commission | percentage}}</span></td>
                        <td><span>
                              <button (click)="editAgentCommissionPopup(p, i, false)"
                                 [disabled]="admin?.admin_acl['Property Management']?.can_update==0"
                                 title="{{'table.title.editPrice' | translate}}" class="action-icon"><img
                                    src="assets/img/edit.png" alt="img"></button>
                           </span></td>

                        <td><span>{{p.lead_properties_count | roundNumber}}</span></td>

                        <td *ngIf="parameter.flag!=5" class="cursor-pointer"
                           title="{{p?.selected_buyer?.user?.name ? ('table.title.clickToChangeBuyer' | translate) : ('table.title.clickToAddBuyer' | translate)}}"
                           (click)="getAllSellers(p, '1', i, 'buyer', 1)">
                           <span *ngIf="p?.selected_buyer?.user?.legal_entity" class="green-color">
                              {{p?.selected_buyer?.user?.legal_entity?.comm_name || ('table.tr.td.add' | translate)}}
                           </span>
                           <span *ngIf="!p?.selected_buyer?.user?.legal_entity" class="green-color">
                              {{p?.selected_buyer?.user?.name || ('table.tr.td.add' | translate)}}
                           </span>
                        </td>

                        <td *ngIf="parameter.flag==5" class="cursor-pointer"
                           title="{{'table.title.viewSellerRequest' | translate}}" (click)="showAllSellers(p?.id, i)">
                           <span class="green-color"><span>{{'table.tr.td.view' | translate}}</span></span>
                        </td>

                        <td *ngIf="parameter.flag!=5" class="cursor-pointer"
                           title="{{p?.selected_seller?.user?.name ? ('table.title.clickToChangeSeller' | translate) : ('table.title.clickToAddSeller' | translate)}}"
                           (click)="getAllSellers(p, '1', i, 'seller', 1)">
                           <span *ngIf="p?.selected_seller?.user?.legal_entity" class="green-color">
                              {{p?.selected_seller?.user?.legal_entity?.comm_name || ('table.tr.td.add' | translate)}}
                           </span>
                           <span *ngIf="!p?.selected_seller?.user?.legal_entity" class="green-color">
                              {{p?.selected_seller?.user?.name || ('table.tr.td.add' | translate)}}
                           </span>
                        </td>

                        <td *ngIf="parameter.flag!=5" class="cursor-pointer" (click)="getBothBroker(p, '')">
                           <span class="green-color">
                              <span
                                 title="{{p?.external_broker?.id ? ('table.title.clickToChange' | translate) : ('table.title.clickToAssign' | translate) }}">{{p?.external_broker?.id
                                 ? ('table.tr.td.change' | translate) : ('table.tr.td.link' | translate)}}</span>
                           </span>
                        </td>
                        <td *ngIf="parameter.flag!=5" class="cursor-pointer">
                           <select (change)="changeSoldStatusPopup(p, i, $event)">
                              <option [selected]="p.for_sale==1" value="1">{{'table.th.buy' | translate}}</option>
                              <option [selected]="p.for_rent==1" value="2">{{'table.th.rent' | translate}}</option>
                              <option [selected]="p.for_hold==1" value="3">{{'table.th.inventory' | translate}}</option>
                           </select>
                        </td>
                        <td *ngIf="parameter.flag!=5">
                           {{p?.is_property_sold ? ('table.th.yes' | translate) : ('table.th.no' | translate)}}
                        </td>
                        <td *ngIf="parameter.flag!=5">
                           <span *ngIf="p?.collection && p?.collection?.is_cancelled!=1">{{'table.th.yes' | translate}}
                              <span class="green-color cursor-pointer"
                                 routerLink="/dashboard/collections/view-collections/{{p?.collection?.id}}">{{p?.collection?.id}}</span>
                           </span>
                           <span
                              *ngIf="!p?.collection || (p?.collection && p?.collection?.is_cancelled==1)">{{'table.th.no'
                              | translate}}</span>
                        </td>
                        <td *ngIf="parameter.flag!=5">
                           <div class="table-actions">
                              <!--this button to open installment modal -->
                              <button (click)="this.openModalInstallment(p);" class="action-icon"
                                 title="{{'table.title.generatePDF' | translate}}"><img
                                    src="assets/img/commercial_pdf.png" alt="img"></button>
                              <button (click)="this.makeCommercializedProperty(p);" class="action-icon"
                                 title="{{'table.title.commercializedProperty' | translate}}"><img
                                    src="assets/img/commercial_pdf.png" alt="img"></button>
                              <button [disabled]="admin?.admin_acl['Property Management']?.can_update==0"
                                 *ngIf="parameter?.flag!=3" routerLink="/dashboard/properties/edit-property/{{p.id}}"
                                 title="{{'table.title.editDetails' | translate}}" class="action-icon"><img
                                    src="assets/img/edit.png" alt="img"></button>
                              <button [disabled]="admin?.admin_acl['Property Management']?.can_update==0"
                                 *ngIf="parameter?.flag==3"
                                 routerLink="/dashboard/properties/edit-property/{{p.id}}/edit"
                                 title="{{'table.title.editDetails' | translate}}" class="action-icon"><img
                                    src="assets/img/edit.png" alt="img"></button>
                              <button [disabled]="admin?.admin_acl['Property Management']?.can_delete==0"
                                 *ngIf="!p.is_blocked" (click)="blockUnblock(p, 1);" class="action-icon"
                                 title="{{'table.title.block' | translate}}"><img src="assets/img/block.png"
                                    alt="img"></button>
                              <button [disabled]="admin?.admin_acl['Property Management']?.can_delete==0"
                                 *ngIf="p.is_blocked == true" (click)="blockUnblock(p, 0);"
                                 class="action-icon unblock-bg" title="{{'table.title.unblock' | translate}}"><img
                                    src="assets/img/unblock.png" alt="img"></button>

                              <!-- unapprove -->
                              <a style="display:none;" #modalOpen data-toggle="modal"
                                 data-target="#addPropertyReason"></a>
                              <button [disabled]="admin?.admin_acl['Property Management']?.can_update==0"
                                 *ngIf="p.status == 3" (click)="openCancellationModal(p, 4);" class="action-icon"
                                 title="{{'table.title.unapprove' | translate}}"><img src="assets/img/ic_disapprove.png"
                                    alt="img"></button>

                              <button [disabled]="admin?.admin_acl['Property Management']?.can_update==0"
                                 *ngIf="p.status == 2" (click)="changeStatus(p,3);" class="action-icon"
                                 title="{{'table.title.approve' | translate}}"><img src="assets/img/tick.png"
                                    alt="img"></button>
                              <button [disabled]="admin?.admin_acl['Property Management']?.can_update==0"
                                 *ngIf="p.status == 3 && p.is_featured==0" (click)="markPropertyFeatured(p,1);"
                                 class="action-icon" title="{{'table.title.markFeauture' | translate}}"><img
                                    src="assets/img/ic_featured.png" alt="img"></button>
                              <button [disabled]="admin?.admin_acl['Property Management']?.can_update==0"
                                 *ngIf="p.status == 3 && p.is_featured==1" (click)="markPropertyFeatured(p,0);"
                                 class="action-icon" title="{{'table.title.markUnfeauture' | translate}}"><img
                                    src="assets/img/tick-selected.png" alt="img"></button>
                              <!-- delete -->
                              <button [disabled]="admin?.admin_acl['Property Management']?.can_purge==0"
                                 (click)="deletePopup(p, i)" class="action-icon"
                                 title="{{'table.title.delete' | translate}}"><img src="assets/img/ic_delete.png"
                                    alt="img"></button>
                           </div>

                        </td>
                     </tr>
                     <!-- <tr *ngIf="total == 0">
                           <td colspan="10">No result found</td>
                           </tr> -->
                  </table>
                  <div class="padding20 center" *ngIf="total == 0">
                     <img src="assets/img/404-error.png">
                  </div>
               </div>
            </div>
         </div>
         <div class="tab-pane container fade" id="seller">{{'table.th.sellerTabOn' | translate}}</div>
      </div>
   </div>

   <div class="btn-cont marginT15" *ngIf="total">
      <div class="row">
         <div class="col-6">
            <div class="title-group">
               <p>{{'table.pagination.showing' | translate}} {{items?.length}} {{'table.pagination.outof' | translate}}
                  {{total}}</p>
            </div>
         </div>
         <div class="col-6 text-right">
            <pagination-controls class="my-pagination" (pageChange)="getPage($event)"></pagination-controls>
         </div>
      </div>
   </div>
</div>




<!-- All Sellers -->
<a data-toggle="modal" data-target="#link-user-model" #linkUserModal></a>
<div class="modal" id="link-user-model">
   <div class="modal-dialog ">
      <div class="modal-content notary-avail">
         <div class="modal-header popup-header">
            <h4 class="modal-title">{{ user_type=='seller' ? ('table.th.linkUnlinkSeller' | translate) :
               ('table.th.linkUnlinkBuyer' | translate)}}</h4>
            <button type="button" class="close" #closeLinkUserModal data-dismiss="modal">&times;</button>
         </div>
         <div class="modal-body">

            <p class="modal-title marginB20" *ngIf="selecter_seller">
               {{'table.th.currentlyLinkedToSeller' | translate}}
               ({{selecter_seller?.user?.is_developer==1 ? 'Developer' :
               (selecter_seller?.user?.legal_entity_id ? 'Legal Representative' : 'Person')}})-
               <b>{{selecter_seller?.user?.legal_entity_id ? selecter_seller?.user?.legal_entity?.comm_name :
                  selecter_seller?.user?.name}}</b>
            </p>

            <p class="modal-title marginB20" *ngIf="selecter_buyer">
               {{'table.th.currentlyLinkedToBuyer' | translate}}
               ({{selecter_buyer?.user?.is_developer==1 ? 'Developer' :
               (selecter_buyer?.user?.legal_entity_id ? 'Legal Representative' : 'Person')}})-
               <b>{{selecter_buyer?.user?.legal_entity_id ? selecter_buyer?.user?.legal_entity?.comm_name :
                  selecter_buyer?.user?.name}}</b>
            </p>

            <div class="cust-tabs">
               <div class="row flex-wrap-reverse">
                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                     <ul class="nav nav-tabs">
                        <li class="nav-item">
                           <a [ngClass]="{'active':seller_type == 1}"
                              (click)="getAllSellers('', keyword, '', user_type, 1)"
                              class="nav-link cursor-pointer">Person</a>
                        </li>
                        <li class="nav-item">
                           <a [ngClass]="{'active':seller_type == 2}"
                              (click)="getAllSellers('', keyword, '', user_type, 2)"
                              class="nav-link cursor-pointer">Legal Entity</a>
                        </li>
                        <li class="nav-item">
                           <a [ngClass]="{'active':seller_type == 3}"
                              (click)="getAllSellers('', keyword, '', user_type, 3)"
                              class="nav-link cursor-pointer">Developer</a>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>

            <div class="spacer40"></div>
            <div class="row">
               <div class="col-md-8 col-6">
                  <input style="max-width:200px" (keyup.enter)="getAllSellers('', keyword, '', user_type, seller_type)"
                     [(ngModel)]="keyword" class="form-control" type="text" name="keyword"
                     placeholder="{{'addForm.placeholder.search' | translate}}">
               </div>
               <div class="col-md-4 col-5 btn-cont">
                  <a class="btn btn-primary pull-right" href="javascript://"
                     (click)="getAllSellers('', keyword, '', user_type, seller_type)">{{'table.th.search' |
                     translate}}</a>
               </div>
            </div>



            <div class="spacer40"></div>
            <div class="modal-table-data" malihu-scrollbar [scrollbarOptions]="scrollbarOptions">
               <table class="table">
                  <tr *ngFor="let item of allUsers">
                     <td>
                        <div class="n-avail-profile">
                           <img *ngIf="item?.image" onerror='src="assets/img/default_img.png"' alt="img"
                              [defaultImage]="item?.image| img:'thumb'" [lazyLoad]="item?.image">
                           <img *ngIf="!item?.image" src="assets/img/default_img.png" alt="img">

                           <div class="n-avail-info">
                              <p class="p12">{{item?.name ? item?.name : item?.comm_name}}</p>
                              <p class="p12" *ngIf="item?.legal_reps && item?.legal_reps?.id">{{item?.legal_reps?.name}}
                              </p>
                              <p class="p10 marginB0">{{'viewProperty.phone' | translate}} : {{item?.dial_code ?
                                 item?.dial_code : constant.dial_code}}-{{item?.phone}}</p>
                              <!-- <p class="p10">{{item?.is_developer==1 ? ('viewProperty.developer' | translate) : ('viewProperty.seller' | translate)}}</p> -->
                           </div>
                        </div>
                     </td>
                     <td *ngIf="user_type=='seller'">
                        <button
                           *ngIf="seller_type==2 ? parameter.seller_id!=item?.legal_reps?.id : parameter.seller_id!=item?.id"
                           (click)="changeStatusPopUp(parameter.property_id, 
                                                      (seller_type==2 ? item.legal_reps.id : item.id), 
                                                      (seller_type==2 ? item.comm_name : item.name), 
                                                      1, 'link')" class="action-icon"
                           title="{{'table.title.acceptRequest' | translate}}">
                           <img src="assets/img/green-icon.png" alt="img"></button>
                        <button
                           *ngIf="seller_type==2 ? parameter.seller_id==item?.legal_reps?.id : parameter.seller_id==item.id"
                           (click)="changeStatusPopUp(parameter.property_id, 
                              (seller_type==2 ? item.legal_reps.id : item.id), 
                              (seller_type==2 ? item.comm_name : item.name), 
                              2, 'request')" class="action-icon" title="{{'table.title.rejectRequest' | translate}}">
                           <!-- (click)="showRejectSellerRequestModal(parameter.property_id, item.id, 2)"  -->
                           <img src="assets/img/ic_disapprove.png" alt="img">
                        </button>
                     </td>
                     <td *ngIf="user_type=='buyer'">
                        <button
                           *ngIf="seller_type==2 ? parameter.buyer_id!=item?.legal_reps?.id : parameter.buyer_id!=item?.id"
                           (click)="changeStatusPopUp(parameter.property_id, 
                                                      (seller_type==2 ? item.legal_reps.id : item.id), 
                                                      (seller_type==2 ? item.comm_name : item.name), 
                                                      1, 'link')" class="action-icon"
                           title="{{'table.title.acceptRequest' | translate}}">
                           <img src="assets/img/green-icon.png" alt="img"></button>
                        <button
                           *ngIf="seller_type==2 ? parameter.buyer_id==item?.legal_reps?.id : parameter.buyer_id==item.id"
                           (click)="changeStatusPopUp(parameter.property_id, 
                                                      (seller_type==2 ? item.legal_reps.id : item.id), 
                                                      (seller_type==2 ? item.comm_name : item.name), 
                                                      2, 'request')" class="action-icon"
                           title="{{'table.title.rejectRequest' | translate}}">
                           <!-- (click)="showRejectSellerRequestModal(parameter.property_id, item.id, 2)"  -->
                           <img src="assets/img/ic_disapprove.png" alt="img">
                        </button>
                     </td>
                  </tr>
                  <tr *ngIf="allUsers?.length==0">
                     <p class="show-not-found">
                        {{'viewProperty.noSellerFound' | translate}}
                     </p>
                  </tr>
               </table>
            </div>
         </div>
      </div>
   </div>
</div>


<!-- Link Seller -->
<a data-toggle="modal" data-target="#link-seller-model" #linkSellerModal></a>
<div class="modal" id="link-seller-model">
   <div class="modal-dialog ">
      <div class="modal-content notary-avail">
         <div class="modal-header popup-header">
            <h4 class="modal-title">{{'viewProperty.requests' | translate}}</h4>
            <button type="button" class="close" #closeLinkSellerModal data-dismiss="modal">&times;</button>
         </div>
         <div class="modal-body">

            <p class="modal-title" *ngIf="selecter_seller">{{'viewProperty.currentlyLinkedToSeller' | translate}} -
               <b>{{selecter_seller?.user?.name}}</b>
            </p>

            <!-- <div class="row">
                     <input style="max-width:200px" [(ngModel)]="keyword" (input)="showAllSellers()" class="form-control" type="text" name="keyword" placeholder="Search">
               </div> -->
            <div class="spacer40"></div>
            <div class="modal-table-data" malihu-scrollbar [scrollbarOptions]="scrollbarOptions">
               <table class="table">
                  <tr *ngFor="let item of allSellers">
                     <td *ngIf="item?.user && item?.user?.is_blocked!=1">
                        <div class="n-avail-profile">
                           <img *ngIf="item?.user?.image" onerror='src="assets/img/default_img.png"' alt="img"
                              [defaultImage]="item?.user?.image| img:'thumb'" [lazyLoad]="item?.user?.image">
                           <img *ngIf="!item?.user?.image" src="assets/img/default_img.png" alt="img">

                           <div class="n-avail-info">
                              <p class="p12">{{item?.user?.name ? item?.user?.name : ('viewProperty.NA' | translate)}}
                              </p>
                              <p class="p10">{{'viewProperty.phone' | translate}} : {{item?.user?.dial_code ?
                                 item?.user?.dial_code : constant.dial_code}}-{{item?.user?.phone}}</p>
                           </div>
                        </div>
                     </td>
                     <td *ngIf="item?.user && item?.user?.is_blocked!=1">
                        <button
                           (click)="changeStatusPopUp(item.property_id, item.user_id, item.user.name, 1, 'request')"
                           class="action-icon" title="{{'table.title.acceptRequest' | translate}}">
                           <img src="assets/img/green-icon.png" alt="img"></button>
                        <button (click)="showRejectSellerRequestModal(item.property_id, item.user_id, 2)"
                           class="action-icon" title="{{'table.title.rejectRequest' | translate}}">
                           <img src="assets/img/ic_disapprove.png" alt="img"></button>
                     </td>
                  </tr>
                  <tr *ngIf="allSellers?.length==0">
                     <p class="show-not-found">
                        {{'viewProperty.noSellerHasRequestedForTheProperty' | translate}}
                     </p>
                  </tr>
               </table>
            </div>
         </div>
      </div>
   </div>
</div>

<!-- Link External Broker -->
<a data-toggle="modal" data-target="#link-broker-model" #linkExtBrokerModal></a>
<div class="modal" id="link-broker-model">
   <div class="modal-dialog ">
      <div class="modal-content notary-avail">
         <div class="modal-header popup-header">
            <h4 class="modal-title">{{property?.external_broker?.id ? ('viewProperty.changeAgent' | translate) :
               ('viewProperty.linkAgent' | translate)}}</h4>
            <button type="button" class="close" #closeExtBrokerModal data-dismiss="modal">&times;</button>
         </div>
         <div class="modal-body">

            <p class="modal-title" *ngIf="property?.external_broker?.id">{{'viewProperty.currentlyLinkedToAgent' |
               translate}} - <b>{{property?.external_broker?.name}}</b></p>

            <div class="row">
               <div class="col-md-8 col-6">
                  <input style="max-width:200px" (keyup.enter)="getBothBroker('', keyword)" [(ngModel)]="keyword"
                     class="form-control" type="text" name="keyword"
                     placeholder="{{'addForm.placeholder.search' | translate}}">
               </div>
               <div class="col-md-4 col-5 btn-cont">
                  <a class="btn btn-primary pull-right" href="javascript://"
                     (click)="getBothBroker('', keyword)">{{'viewProperty.search' | translate}}</a>
               </div>
            </div>

            <div class="spacer40"></div>
            <div class="modal-table-data" malihu-scrollbar [scrollbarOptions]="scrollbarOptions">
               <table class="table">
                  <tr *ngFor="let item of allExtBrokers">
                     <td>
                        <div class="n-avail-profile">
                           <img *ngIf="item?.image" onerror='src="assets/img/default_img.png"' alt="img"
                              [defaultImage]="item?.image| img:'thumb'" [lazyLoad]="item?.image">
                           <img *ngIf="!item?.image" src="assets/img/default_img.png" alt="img">

                           <div class="n-avail-info">
                              <p class="p12">{{item?.name | titlecase}}</p>
                              <p class="p10 marginB0">{{item?.is_external_agent ? 'OUTSIDE AGENT' : 'IN-HOUSE AGENT'}}
                              </p>
                              <p class="p10">{{'viewProperty.phone' | translate}} : {{item?.dial_code ? item?.dial_code
                                 : constant.dial_code}}-{{item?.phone}}</p>
                           </div>
                        </div>
                     </td>
                     <td>
                        <button *ngIf="property?.external_broker?.id!=item.id"
                           (click)="attachExternalBrokerPopUp(item, 1)" class="action-icon"
                           title="{{'table.title.linkAgent' | translate}}">
                           <img src="assets/img/green-icon.png" alt="img"></button>

                        <button *ngIf="property?.external_broker?.id==item.id"
                           (click)="attachExternalBrokerPopUp(item, 2)" class="action-icon"
                           title="{{'table.title.unlinkAgent' | translate}}">
                           <img src="assets/img/ic_disapprove.png" alt="img"></button>
                     </td>
                  </tr>
                  <tr *ngIf="allExtBrokers?.length==0">
                     <p class="show-not-found">{{'viewProperty.noExternalAgentFound' | translate}}</p>
                  </tr>
               </table>
            </div>
         </div>
      </div>
   </div>
</div>



<div class="modal animated" id="addPropertyReason">
   <div class="modal-dialog fadeIndown">
      <div class="modal-content">
         <div class="modal-header modal-header-new">
            <h4 class="modal-title">{{'viewProperty.addReason' | translate}}</h4>
            <button style="display: none;" type="button" class="close" data-dismiss="modal" #modalClose>&times;</button>
            <button type="button" class="close" (click)="closeModal()">&times;</button>
         </div>

         <form class="form-horizontal form-model0P form-model-newP" role="form" ngNativeValidate #addForm="ngForm"
            (ngSubmit)="changeStatus(item, parameter.status); addForm.reset();">
            <div class="modal-body modal-body-new">
               <div class="row">
                  <div class="col-12">
                     <div class="form-group-2">
                        <div class="form-group">
                           <textarea rows="4" required class="form-control note" name="reason"
                              [(ngModel)]="reason"></textarea>
                        </div>
                     </div>
                  </div>
                  <div class="col-12">
                     <div class="btn-cont text-right">
                        <button type="submit" [disabled]="!addForm.valid" class="btn btn-primary">{{'viewProperty.add' |
                           translate}}</button>
                     </div>
                  </div>
               </div>
            </div>
         </form>
      </div>
   </div>
</div>

<a style="display:none;" #rejectModalOpen data-toggle="modal" data-target="#addSellerRejectReason"></a>
<div class="modal animated" id="addSellerRejectReason">
   <div class="modal-dialog fadeIndown">
      <div class="modal-content">
         <div class="modal-header modal-header-new">
            <h4 class="modal-title">{{'viewProperty.addReasonForRejection' | translate}}</h4>
            <button style="display: none;" type="button" class="close" data-dismiss="modal"
               #rejectModalClose>&times;</button>
            <button type="button" class="close" (click)="closeReasonModal()">&times;</button>
         </div>

         <form class="form-horizontal form-model0P form-model-newP" role="form" ngNativeValidate #addForm="ngForm"
            (ngSubmit)="changeStatusSellerSelection(); addForm.reset();">
            <div class="modal-body modal-body-new">
               <div class="row">
                  <div class="col-12">
                     <div class="form-group-2">
                        <div class="form-group">
                           <textarea rows="4" required class="form-control note" name="reason"
                              [(ngModel)]="reason"></textarea>
                        </div>
                     </div>
                  </div>
                  <div class="col-12">
                     <div class="btn-cont text-right">
                        <button type="submit" [disabled]="!addForm.valid" class="btn btn-primary">{{'viewProperty.add' |
                           translate}}</button>
                     </div>
                  </div>
               </div>
            </div>
         </form>
      </div>
   </div>
</div>


<div class="modal animated" id="advancedSearch">
   <div class="modal-dialog fadeIndown">
      <div class="modal-content" style="
     border-top-style: solid;
     border-top-width: thick;
     border-top-color: rgb(0, 185, 111); margin-top: -47%; border-radius: 5px;
     box-shadow: 0px -2px 0px 7px rgb(105,105,105);width: 217%;
margin-left: -38%;">
         <div class="modal-header modal-header-new" style="background-color: white;">
            <h4 class="modal-title">{{'advanceSearch.advancedSearch' | translate}}</h4>
            <button style="display: none;" type="button" class="close" data-dismiss="modal" #modalClose>&times;</button>
            <button type="button" class="close" (click)="close()">&times;</button>
         </div>

         <form class="form-horizontal form-model0P form-model-newP">
            <h4 style="color: rgb(48, 46, 46); font-size: 18px;">{{'advanceSearch.rangePrice' | translate}}</h4>
            <div class="row">
               <div class="form-group col-md-6">
                  <input type="text" class="form-control" placeholder="Min" name="min_price"
                     [(ngModel)]="parameter.min_price">
               </div>
               <div class="form-group col-md-6">
                  <input type="text" class="form-control" placeholder="Max" name="max_price"
                     [(ngModel)]="parameter.max_price">
               </div>
            </div>
            <h4 style="color: rgb(48, 46, 46); font-size: 18px;">{{'advanceSearch.rangeCarpetArea' | translate}}</h4>
            <div class="row">
               <div class="form-group col-md-6">
                  <input type="text" class="form-control" placeholder="Min" name="min_carpet_area"
                     [(ngModel)]="parameter.min_carpet_area">
               </div>
               <div class="form-group col-md-6">
                  <input type="text" class="form-control" placeholder="Max" name="max_carpet_area"
                     [(ngModel)]="parameter.max_carpet_area">
               </div>
            </div>
            <!-- PropertyType -->
            <h4 style="color: rgb(48, 46, 46); font-size: 18px;">{{'advanceSearch.PropertyType' | translate}}</h4>
            <div class="row">
               <div class="form-group col-md-12">
                  <label class="cust-radio" *ngFor="let propertyType of propertyTypes">
                     <input type="radio" (change)="setValue('property_type_id', propertyType.id)"
                        value="{{propertyType.id}}" [(ngModel)]="parameter.property_type_id"
                        [checked]="parameter.property_type_id == propertyType.id ? 'checked' : ''"
                        name="property_type_id">
                     <span class="checkmark">{{propertyType.name_en}}</span>
                  </label>
               </div>
            </div>
            <!-- ParkingDetails -->
            <h4 style="color: rgb(48, 46, 46); font-size: 18px;">{{'advanceSearch.ParkingDetails' | translate}}</h4>
            <div class="row">
               <div class="form-group col-md-4">
                  <p class="parking" style="color: #00B96F;">{{'advanceSearch.ParkingAvailable' | translate}}</p>
                  <label class="switch">
                     <input type="checkbox" [(ngModel)]="parameter.parking" name="parking">
                     <span class="slider round"></span>
                  </label>
               </div>

               <div class="form-group col-md-4">
                  <p class="parking" style="color: #00B96F;">{{'advanceSearch.PropertyFurnished' | translate}}</p>
                  <label class="switch">
                     <input type="checkbox" [(ngModel)]="parameter.furnished" name="furnished">
                     <span class="slider round"></span>
                  </label>
               </div>

               <div class="form-group col-md-4">
                  <p class="parking" style="color: #00B96F;">{{'advanceSearch.ParkingForSale' | translate}}</p>
                  <label class="switch">
                     <input type="checkbox" [(ngModel)]="parameter.parking_for_sale" name="parking_for_sale" checked>
                     <span class="slider round"></span>
                  </label>
               </div>

               <div class="form-group col-md-4" *ngIf="parameter.parking == 1">
                  {{'advanceSearch.ParkingPlace' | translate}}
                  <input class="form-control" type="number" [(ngModel)]="parameter.parking_place" min="0"
                     name="parking_place">
               </div>

            </div>
            <!-- configuration -->
            <h4 style="color: rgb(48, 46, 46); font-size: 18px;">{{'advanceSearch.configuration' | translate}}</h4>
            <div class="row">
               <div class="form-group col-md-4">
                  {{'advanceSearch.Bedrooms' | translate}}<br />
                  <input class="form-control" type="number" [(ngModel)]="parameter.bedroom" min="0" name="bedroom">
                  <!-- <button (click)="increment()">+</button>
                  <button (click)="decrement()">-</button>
                  <br />
                  <div>{{ count }}</div> -->
               </div>
               <div class="form-group col-md-4">
                  {{'advanceSearch.Bathrooms' | translate}}<br />
                  <input class="form-control" type="number" [(ngModel)]="parameter.bathroom" min="0" name="bathroom">
                  <!-- <button (click)="increment1()">+</button>
                  <button (click)="decrement1()">-</button>
                  <br />
                  <div>{{ count1 }}</div> -->
               </div>
               <div class="form-group col-md-4">
                  {{'advanceSearch.HalfBathrooms' | translate}}<br />
                  <input class="form-control" type="number" [(ngModel)]="parameter.half_bathroom" min="0"
                     name="half_bathroom">
                  <!-- <button (click)="increment2()">+</button>
                  <button (click)="decrement2()">-</button>
                  <br />
                  <div>{{ count2 }}</div> -->
               </div>
            </div>
            <!-- Amenities -->
            <h4 style="color: rgb(48, 46, 46); font-size: 18px;">{{'advanceSearch.Amenities' | translate}}</h4>
            <div class="row">
               <div class="form-group col-md-12">
                  <div class="clearfix"></div>
                  <ng-multiselect-dropdown class="col-3 section-section2 multi-select" [placeholder]="''"
                     [data]="amenities" [(ngModel)]="selctedAmenities" [settings]="multiDropdownSettings"
                     (onDeSelect)="unsetProject($event)" (onSelect)="onItemSelect('selctedAmenities', $event)"
                     (onSelectAll)="onSelectAll($event)">
                  </ng-multiselect-dropdown>
                  <div class="clearfix"></div>
                  <!-- <label class="cust-radio" *ngFor="let amenity of parameter.amenities">
                  <input type="checkbox" name="amenity" [(ngModel)]="mymodel">
                  <span class="checkmark">{{(showMore) ? amenity.name_en : amenity.name_en | slice:0:2}}</span>
               </label>
               <span *ngIf="!showMore">...</span> 
               <a href="javascript:;" *ngIf="!showMore" (click)="showMore=true">{{'addForm.addMore' | translate}}</a>
               {{mymodel | json}} -->
               </div>
            </div>
            <button type="submit" class="btn btn-success" (click)="searchProperties()" style="border-left-color: rgb(0, 185, 111);
               border-right-color: rgb(0, 185, 111);">
               {{'advanceSearch.apply' | translate}}
            </button>&nbsp;&nbsp;

            <button type="button" class="btn btn-danger" (click)="close()"
               style="background-color: rgb(238, 123, 124);">{{'advanceSearch.cancel' | translate}}</button>

         </form>
      </div>
   </div>
</div>

<a style="display:none;" #openInstallmentModal data-toggle="modal" data-target="#installmentModal"></a>
<div class="modal animated" id="installmentModal" style="margin-top: -14%;">
   <div class="modal-dialog fadeIndown">
      <div class="modal-content">
         <div class="modal-header modal-header-new">
            <h4 class="modal-title" style="font-weight: bold;">{{'generatePDF.offerInformaton' | translate}}</h4>
            <button style="display: none;" type="button" class="close" data-dismiss="modal"
               #closeInstallmentModal>&times;</button>
            <button type="button" class="close" (click)="this.closeModalInstallment()">&times;</button>
         </div>
         <form class="form-horizontal form-model0P form-model-newP" role="form" [formGroup]="this.installmentFormGroup">
            <div class="modal-body modal-body-new">
               <div style="margin-top: -25px;">
                  <h6 style="font-weight: bold;">{{'generatePDF.offerDetails' | translate}}</h6>
               </div>
               <div class="row" style="margin: auto;">
                  <div class="col-lg-6 col-md-6 col-sm-6 col-12">
                     <div class="form-group-2">
                        <label>{{'generatePDF.downPaymentPercentage' | translate}}
                           <span class="color-red">*</span>
                        </label>
                     </div>
                  </div>
                  <div class="col-lg-6 col-md-6 col-sm-6 col-12">
                     <div class="form-group-2">
                        <label>{{'generatePDF.discountPercentage' | translate}}
                           <span class="color-red">*</span>
                        </label>
                     </div>
                  </div>
               </div>
               <div class="row" style="margin-top: -15px;margin-left: auto;">
                  <div class="col-lg-4 col-md-6 col-sm-6 col-12">
                     <div class="form-group-3">
                        <input required autocomplete="off" class="form-control" type="text" appOnlyDecimal
                           formControlName="downPayment" placeholder="%">
                     </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-6 col-12" style="margin-left: 65px;">
                     <div class="form-group-3">
                        <input autocomplete="off" class="form-control" type="text" formControlName="discount"
                           appOnlyDecimal placeholder="%">
                     </div>
                  </div>
               </div>
               <div class="row" style="margin: auto;">
                  <div class="col-lg-6 col-md-6 col-sm-6 col-12">
                     <div class="form-group-2">
                        <label>{{'generatePDF.monthlyInstallmentPercentage' | translate}}
                        </label>
                     </div>
                  </div>
                  <div class="col-lg-6 col-md-6 col-sm-6 col-12">
                     <div class="form-group-2">
                        <label>{{'generatePDF.interest' | translate}}
                        </label>
                     </div>
                  </div>
               </div>
               <div class="row" style="margin-top: -15px;margin-left: auto;">
                  <div class="col-lg-4 col-md-6 col-sm-6 col-12">
                     <div class="form-group-3">
                        <input required autocomplete="off" class="form-control" type="text" appOnlyDecimal
                           formControlName="monthlyInstallment" placeholder="%">
                     </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-6 col-12" style="margin-left: 65px;">
                     <div class="form-group-3">
                        <input autocomplete="off" class="form-control" type="text" formControlName="interest"
                           appOnlyDecimal placeholder="%">
                     </div>
                  </div>
               </div>
               <div class="row" style="margin: auto;">
                  <div class="col-lg-12 col-md-6 col-sm-6 col-12">
                     <div class="form-group-2">
                        <label>{{'generatePDF.numberOfMI' | translate}}
                        </label>
                     </div>
                  </div>
               </div>
               <div class="row" style="margin-top: -15px;margin-left: auto;">
                  <div class="col-lg-4 col-md-6 col-sm-6 col-12">
                     <div class="form-group-3">
                        <input required autocomplete="off" class="form-control" type="text" formControlName="numberOfMI"
                           maxlength="6" appOnlyNumber placeholder="#">
                     </div>
                  </div>
               </div>
               <div class="row" style="margin: auto;">
                  <div class="col-lg-12 col-md-6 col-sm-6 col-12">
                     <div class="form-group-2">
                        <label>{{'generatePDF.paymentupondeliveryPercentage' | translate}}
                        </label>
                     </div>
                  </div>
               </div>
               <div class="row" style="margin-top: -15px;margin-left: auto;">
                  <div class="col-lg-4 col-md-6 col-sm-6 col-12">
                     <div class="form-group-3">
                        <input required autocomplete="off" class="form-control" type="text" appOnlyDecimal
                           formControlName="paymentupondelivery" placeholder="%">
                     </div>
                  </div>
               </div>
               <div class="row" *ngIf="!this.installmentFormGroup.get('isAddVariables').value"
                  style="margin: auto;font-size: xx-small;">
                  <div class="col-12">
                     <div class="btn-cont">
                        <span><a class="add" (click)="this.markIsAddVariables(true,$event)"
                              href="javascript://">{{'generatePDF.addNewVariablePlus' | translate}}</a></span>
                     </div>
                  </div>
               </div>
               <div class="row" style="margin: auto;" *ngIf="this.installmentFormGroup.get('isAddVariables').value">
                  <div class="col-lg-4 col-md-6 col-sm-6 col-12">
                     <div class="form-group-2">
                        <label>{{'generatePDF.variableName' | translate}}
                        </label>
                     </div>
                  </div>
                  <div class="col-lg-6 col-md-6 col-sm-6 col-12">
                     <div class="form-group-2">
                        <label>{{'generatePDF.variablePercentage' | translate}}
                        </label>
                     </div>
                  </div>
               </div>
               <div class="row" style="margin-top: -15px;margin-left: auto;"
                  *ngIf="this.installmentFormGroup.get('isAddVariables').value">
                  <div class="col-lg-4 col-md-6 col-sm-6 col-12">
                     <div class="form-group-3">
                        <input required autocomplete="off" class="form-control" type="text"
                           formControlName="tempAddVariablesText" placeholder="">
                     </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-6 col-12">
                     <div class="form-group-3">
                        <input required autocomplete="off" class="form-control" type="text"
                           formControlName="tempAddVariablesPercentage" placeholder="%">
                     </div>
                  </div>
                  <div class="col-lg-2 col-md-6 col-sm-6 col-12">
                     <div class="btn-cont" style="padding: 5px;">
                        <span><a class="add" (click)="this.addNewAddVariables($event)"
                              href="javascript://">{{'addForm.save' | translate}}</a></span>
                     </div>
                  </div>
                  <div class="col-lg-2 col-md-6 col-sm-6 col-12">
                     <div class="btn-cont" style="padding: 5px;">
                        <span><a class="add" (click)="this.markIsAddVariables(false,$event)" style="color: red;"
                              href="javascript://">{{'addForm.remove' | translate}}</a></span>
                     </div>
                  </div>
               </div>
               <div formArrayName="addVariablesFormArray" *ngIf="this.getAddVariablesFormArrayLength > 0">
                  <ng-container
                     *ngFor="let temp_add_variables of this.getAddVariablesFormArray['controls']; let i=index">
                     <div [formGroupName]="i">
                        <div class="row" style="margin: auto;">
                           <div class="col-lg-6 col-md-6 col-sm-6 col-12">
                              <div class="form-group-2">
                                 <label>{{'generatePDF.variableName' | translate}}
                                 </label>
                              </div>
                           </div>
                           <div class="col-lg-6 col-md-6 col-sm-6 col-12">
                              <div class="form-group-2">
                                 <label>{{'generatePDF.variablePercentage' | translate}}
                                 </label>
                              </div>
                           </div>
                        </div>
                        <div class="row" style="margin-top: -15px;margin-left: auto;">
                           <div class="col-lg-4 col-md-6 col-sm-6 col-12">
                              <div class="form-group-3">
                                 <input required autocomplete="off" class="form-control" type="text"
                                    formControlName="addVariablesText" placeholder="">
                              </div>
                           </div>
                           <div class="col-lg-4 col-md-6 col-sm-6 col-12" style="margin-left: 65px;">
                              <div class="form-group-3">
                                 <input required autocomplete="off" class="form-control" type="text"
                                    formControlName="addVariablesPercentage" placeholder="%">
                              </div>
                           </div>
                           <div class="col-lg-2 col-md-6 col-sm-6 col-12">
                              <div style="padding: 5px;">
                                 <button (click)="this.removeAddVariablesFormGroup(i);" class="action-icon"
                                    title="{{'addForm.remove' | translate}}"><img src="assets/img/ic_disapprove.png"
                                       alt="img"></button>
                              </div>
                           </div>
                        </div>
                     </div>
                  </ng-container>
               </div>
               <div class="row" style="margin: auto;">
                  <div class="col-lg-12 col-md-6 col-sm-6 col-12">
                     <div class="form-group-2">
                        <label>{{'generatePDF.leadName' | translate}}
                        </label>
                     </div>
                  </div>
               </div>
               <div class="row" style="margin-top: -15px;margin-left: auto;">
                  <div class="col-lg-12 col-md-6 col-sm-6 col-12">
                     <div class="form-group-3">
                        <input required autocomplete="off" class="form-control" type="text" formControlName="leadName">
                     </div>
                  </div>
               </div>
               <div>
                  <h6 style="font-weight: bold;">{{'generatePDF.bankDetails' | translate}}</h6>
               </div>
               <!-- <div class="row">                 
                  <div class="form-group col-md-6">
                     {{'generatePDF.agency' | translate}}&nbsp;&nbsp;&nbsp;<label class="switch1">
                        <input type="checkbox" class="form-control" formControlName="agencyOrSeller" (change)="this.onAgencyOrSellerChange()">
                        <span class="slider round" style="background-color: #00B96F;"></span></label>&nbsp;&nbsp;&nbsp;{{'generatePDF.seller' | translate}}
                  </div>
                  <div class="col-6">
                     <div class="form-group-2"> 
                        <ng-multiselect-dropdown class="col-3 section-section2" [placeholder]="'Select account'"
                        [data]="levels" [(ngModel)]="selectedvalue" [settings]="multiDropdownSettingss"
                        (onDeSelect)="unsetProject($event)" (onSelect)="onItemSelects($event)"
                        (onSelectAll)="onSelectAll($event)">
                     </ng-multiselect-dropdown>
                  </div>                     
                  </div>
               </div> -->
               <div class="row" style="margin: auto;">
                  <div class="col-lg-2 col-md-6 col-sm-6 col-12">
                     <div style="margin: 5px;">
                        <span style="font-weight: 600;">{{'generatePDF.agency' | translate}}</span>
                     </div>
                  </div>
                  <div class="col-lg-2 col-md-6 col-sm-6 col-12">
                     <div class="form-group-3">
                        <label class="switch1">
                           <input type="checkbox" class="form-control" formControlName="agencyOrSeller"
                              (change)="this.onAgencyOrSellerChange()">
                           <span class="slider round" style="background-color: #00B96F;"></span>
                        </label>
                     </div>
                  </div>
                  <div class="col-lg-2 col-md-6 col-sm-6 col-12">
                     <div style="margin: 5px;">
                        <span style="font-weight: 600;">{{'generatePDF.seller' | translate}}</span>
                     </div>
                  </div>
                  <div class="col-lg-6 col-md-6 col-sm-6 col-12">
                     <div class="form-group-3">
                        <div class="form-group">
                           <select name="payment_bank" class="form-control" formControlName="paymentBankDetails">
                              <option value="">{{'generatePDF.selectAccount' | translate}}</option>
                              <option *ngFor="let tempPaymentBankDetailsArray of paymentBankDetailsArray"
                                 [ngValue]="tempPaymentBankDetailsArray">
                                 {{tempPaymentBankDetailsArray?.name}} |
                                 {{tempPaymentBankDetailsArray?.account_number}} |
                                 {{tempPaymentBankDetailsArray?.currency?.code}}</option>
                           </select>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="row" *ngIf="this.getAddNoteFormArrayLength == 0" style="margin: auto;font-size: xx-small;">
                  <div class="col-12">
                     <div class="btn-cont">
                        <span><a class="add" (click)="this.addNotes($event)"
                              href="javascript://">{{'generatePDF.addNotePlus' | translate}}</a></span>
                     </div>
                  </div>
               </div>
               <div formArrayName="addNoteFormArray" *ngIf="this.getAddNoteFormArrayLength > 0">
                  <ng-container *ngFor="let temp_add_note of this.getAddNoteFormArray['controls']; let j=index">
                     <div [formGroupName]="j">
                        <div class="row" style="margin-left: auto;">
                           <div class="col-lg-12 col-md-6 col-sm-6 col-12">
                              <div class="form-group-2">
                                 <textarea rows="3" type="text" class="form-control note"
                                    formControlName="addNote"></textarea>
                              </div>
                           </div>
                        </div>
                     </div>
                  </ng-container>
               </div>
            </div>
         </form>
         <div class="row">
            <div class="col-lg-5 col-md-5" style="margin-left: auto;">
               <div class="form-group btn-cont">
                  <label style="display: block; margin-top: 3px;">&nbsp;</label>
                  <button type="button" (click)="this.checkIsGeneratePDF()" class="btn btn-primary-new width100P P86"
                     style="height: 42px;">{{'generatePDF.generateOffer' | translate}}</button>
               </div>
            </div>
            <div class="col-lg-4 col-md-4" style="margin-right: auto;">
               <div class="form-group btn-cont">
                  <label style="display: block; margin-top: 3px;">&nbsp;</label>
                  <button type="button" class="btn  width100P P86 btn-danger" (click)="this.closeModalInstallment()">
                     {{'advanceSearch.cancel' | translate}}</button>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>