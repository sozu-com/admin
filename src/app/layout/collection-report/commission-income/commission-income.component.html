<div class="container-fluid">
      <div class="row">
            <div class="col-12">
                  <div class="title-group">
                        <h5>{{'collectionReport.commissionIncome' | translate}}</h5>
                  </div>
            </div>
      </div>

      <div class="white-bg marginT15 padding15">
            <div class="page-title-4 row">
                <h3 class="col-10">{{'reports.statsAndTrendAnalytics' | translate}}</h3>
                <span class="pull-right col-2">
                      <select class="form-control" [(ngModel)]="reportType">
                            <option value="1">{{'collectionReport.graphicalview' | translate}}</option>
                            <option value="2">{{'collectionReport.tabularView' | translate}}</option>
                      </select>
                </span>
            </div>

            <div class="filters row">
                  <div class="col-lg-2 col-md-2">
                        <div class="form-group">
                              <label>{{'collectionReport.start_date' | translate}}</label>
                              <p-calendar dateFormat="dd/M/yy" [locale]="locale" showIcon="true" [(ngModel)]="input.start_date" [maxDate]="today" showButtonBar="true" class="coll-report-calendar"
                                    [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2040"></p-calendar>
                        </div>
                  </div>
                  <div class="col-lg-2 col-md-2">
                        <div class="form-group">
                              <label>{{'collectionReport.end_date' | translate}}</label>
                              <p-calendar dateFormat="dd/M/yy" [locale]="locale" showIcon="true" [(ngModel)]="input.end_date" showButtonBar="true" class="coll-report-calendar"
                                    [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2040"></p-calendar>
                        </div>
                  </div>

                  <div class="col-lg-2 col-md-2">
                        <div class="form-group">
                              <label>{{'collectionReport.project' | translate}}</label>
                              <div class="clearfix"></div>
                              <ng-multiselect-dropdown class="section-section2 multi-select" [placeholder]="''" [data]="projects" [(ngModel)]="selctedProjects"
                                    [settings]="multiDropdownSettings" (onDeSelect)="onItemDeSelect('projects', $event)" (onSelect)="onItemSelect('selctedProjects', $event)"
                                    (onSelectAll)="onSelectAll($event)">
                              </ng-multiselect-dropdown>
                              <div class="clearfix"></div>
                        </div>
                  </div>

                  <div class="col-lg-2 col-md-2">
                        <div class="form-group">
                              <label>{{'collectionReport.commissionType' | translate}}</label>
                              <div class="clearfix"></div>
                              <ng-multiselect-dropdown class="section-section2 multi-select"
                                    [placeholder]="''"
                                    [data]="commissionsType"
                                    [(ngModel)]="selectedCommissions"
                                    [settings]="singleDropdownSettings"
                                    (onDeSelect)="onSelectCommission(0, $event)"
                                    (onSelect)="onSelectCommission(1, $event)"
                                    (onSelectAll)="onSelectAll($event)">
                              </ng-multiselect-dropdown>
                              <div class="clearfix"></div>
                        </div>
                  </div>
      
                  <div class="col-lg-2 col-md-2">
                        <div class="form-group marginB0">
                              <label>{{'collectionReport.currency' | translate}}</label>
                              <div class="clearfix"></div>
                              <ng-multiselect-dropdown class="section-section2 multi-select" [placeholder]="''" [data]="currencies" [(ngModel)]="selectedCurrencies"
                                    [settings]="multiDropdownSettings" (onDeSelect)="onItemDeSelect('currencies', $event)" (onSelect)="onItemSelect('selectedCurrencies', $event)"
                                    (onSelectAll)="onSelectAll($event)">
                              </ng-multiselect-dropdown>
                              <div class="clearfix"></div>
                        </div>
                  </div>
                  <div class="col-lg-1 col-md-2">
                        <div class="form-group btn-cont">
                              <label style="display: block; margin-top: 3px;">&nbsp;</label>
                              <button type="button" (click)="getReportData()" class="btn btn-primary-new width100P P86">{{'collectionReport.apply' | translate}}</button>
                        </div>
                  </div>

                  <div class="col-lg-1 col-md-2">
                        <div class="form-group btn-cont">
                              <label style="display: block; margin-top: 3px;">&nbsp;</label>
                              <button type="button" (click)="resetFilters()" class="btn btn-primary-new width100P P86">{{'collectionReport.reset' | translate}}</button>
                        </div>
                  </div>
            </div>

            <div class="graph-area" [style.display]="reportType==1 ? 'block' : 'none'">
                  <div id="chartContainer" style="height: 370px; width: 90%; margin-left:auto;margin-right:auto;"></div>
                </div>
  
              <div class="table-responsive main-table" *ngIf="reportType == 2" style="width: 90%; margin-left:auto;margin-right:auto;">
                    <h5>{{'collectionReport.tabularView' | translate}}<span class=" pull-right">
                          <button class="btn btn-primary-new export-btn" (click)="exportData()">{{'collectionReport.export' | translate}}</button>
                    </span></h5>
                    <table class="table table-bordered table-striped">
                          <thead>
                                <th>{{'collectionReport.month' | translate}}</th>
                                <th>{{'collectionReport.commissionAmt' | translate}}</th>
                                <th>{{'collectionReport.IVAAmount' | translate}}</th>
                          </thead>
                          <tbody>
                                <tr *ngFor="let item of items">
                                      <td>{{item.label}}</td>
                                      <td>{{(item.commission || 0) | currency}}</td>
                                      <td>{{(item.iva_amount || 0) | currency}}</td>
                                </tr>
                          </tbody>
                    </table>
              </div>
      </div>

</div>