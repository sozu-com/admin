<div class="container-fluid">
      <div class="row">
            <div class="col-12">
                  <div class="title-group">
                        <h5>{{'collectionReport.commissionIncome' | translate}}</h5>
                  </div>
            </div>
      </div>

      <div class="white-bg marginT15 padding15">
            <div class="page-title-4 row">
                <h3 class="col-10">{{'reports.statsAndTrendAnalytics' | translate}}</h3>
                <span class="pull-right col-2">
                      <select class="form-control" [(ngModel)]="reportType">
                            <option value="1">{{'collectionReport.graphicalview' | translate}}</option>
                            <option value="2">{{'collectionReport.tabularView' | translate}}</option>
                      </select>
                </span>
            </div>

            <div class="filters row">
                  <div class="col-lg-2 col-md-2">
                        <div class="form-group">
                              <label>{{'collectionReport.start_date' | translate}}</label>
                              <p-calendar dateFormat="dd/M/yy" [locale]="locale" showIcon="true" [(ngModel)]="input.start_date" [maxDate]="today" showButtonBar="true" class="coll-report-calendar"
                                    [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2040"></p-calendar>
                        </div>
                  </div>
                  <div class="col-lg-2 col-md-2">
                        <div class="form-group">
                              <label>{{'collectionReport.end_date' | translate}}</label>
                              <p-calendar dateFormat="dd/M/yy" [locale]="locale" showIcon="true" [(ngModel)]="input.end_date" showButtonBar="true" class="coll-report-calendar"
                                    [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2040"></p-calendar>
                        </div>
                  </div>

                  <div class="col-lg-2 col-md-2">
                        <div class="form-group">
                              <label>{{'collectionReport.project' | translate}}</label>
                              <div class="clearfix"></div>
                              <ng-multiselect-dropdown class="section-section2 multi-select" [placeholder]="''" [data]="projects" [(ngModel)]="selctedProjects"
                                    [settings]="multiDropdownSettings" (onDeSelect)="onItemDeSelect('projects', $event)" (onSelect)="onItemSelect('selctedProjects', $event)"
                                    (onSelectAll)="onSelectAll($event)">
                              </ng-multiselect-dropdown>
                              <div class="clearfix"></div>
                        </div>
                  </div>

                  <div class="col-lg-2 col-md-2">
                        <div class="form-group">
                              <label>{{'collectionReport.commissionType' | translate}}</label>
                              <div class="clearfix"></div>
                              <ng-multiselect-dropdown class="section-section2 multi-select"
                                    [placeholder]="''"
                                    [data]="commissionsType"
                                    [(ngModel)]="selectedCommissions"
                                    [settings]="singleDropdownSettings"
                                    (onDeSelect)="onSelectCommission(0, $event)"
                                    (onSelect)="onSelectCommission(1, $event)"
                                    (onSelectAll)="onSelectAll($event)">
                              </ng-multiselect-dropdown>
                              <div class="clearfix"></div>
                        </div>
                  </div>
      
                  <div class="col-lg-2 col-md-2">
                        <div class="form-group marginB0">
                              <label>{{'collectionReport.currency' | translate}}</label>
                              <div class="clearfix"></div>
                              <ng-multiselect-dropdown class="section-section2 multi-select" [placeholder]="''" [data]="currencies" [(ngModel)]="selectedCurrencies"
                                    [settings]="multiDropdownSettings" (onDeSelect)="onItemDeSelect('currencies', $event)" (onSelect)="onItemSelect('selectedCurrencies', $event)"
                                    (onSelectAll)="onSelectAll($event)">
                              </ng-multiselect-dropdown>
                              <div class="clearfix"></div>
                        </div>
                  </div>
                  <div class="col-lg-1 col-md-2">
                        <div class="form-group btn-cont">
                              <label style="display: block; margin-top: 3px;">&nbsp;</label>
                              <button type="button" (click)="getReportData()" class="btn btn-primary-new width100P P86">{{'collectionReport.apply' | translate}}</button>
                        </div>
                  </div>

                  <div class="col-lg-1 col-md-2">
                        <div class="form-group btn-cont">
                              <label style="display: block; margin-top: 3px;">&nbsp;</label>
                              <button type="button" (click)="resetFilters()" class="btn btn-primary-new width100P P86">{{'collectionReport.reset' | translate}}</button>
                        </div>
                  </div>
            </div>
            <div [style.display]="reportType==1 ? 'block' : 'none'" *ngIf="comn_type != 4">
                  <div class="img-des">
                        <div class="row">
                          <div class="col-md-4 col-sm-6 col-12 img-c">
                              <div class="block">
                                    <p class="p18">{{(totalComission || 0) | currency}}</p>
                                    <p class="p13" style="color: black;font-weight: bold;">{{'dashboard.total' | translate}}</p>
                              </div>
                          </div>
                          <div class="col-md-4 col-sm-6 col-12 img-c">
                            <div class="block">
                              <p class="p18">{{(commission_sum || 0) | currency}}</p>
                              <p class="p13">{{'collectionReport.commissionAmt' | translate}}</p>
                            </div>
                          </div>
                          <div class="col-md-4 col-sm-6 col-12 img-c">
                            <div class="block">
                              <p class="p18">{{(iva_amountt || 0) | currency}}</p>
                              <p class="p13">{{'collectionReport.IVAAmount' | translate}}</p>
                            </div>
                          </div>
                        </div>
                      </div>
            </div>
            <div class="graph-area" [style.display]="reportType==1 ? 'block' : 'none'" *ngIf="comn_type != 4">
                  <div id="chartContainer" style="height: 370px; width: 90%; margin-left:auto;margin-right:auto;"></div>
                </div>
  
            <div class="graph-area" [style.display]="reportType==1 ? 'block' : 'none'" *ngIf="comn_type != 4">
                  <div id="chartContainer1" style="height: 370px; width: 90%; margin-left:auto;margin-right:auto;"></div>
            </div>
            <div class="graph-area" [style.display]="reportType==1 ? 'block' : 'none'" *ngIf="comn_type != 4">
                  <div id="chartContainer2" style="height: 370px; width: 90%; margin-left:auto;margin-right:auto;">
                  </div>
            </div>
            <div class="graph-area" [style.display]="reportType==1 ? 'block' : 'none'" *ngIf="comn_type == 4">
                  <div id="chartContainer3" style="height: 370px; width: 90%; margin-left:auto;margin-right:auto;">
                  </div>
            </div>
            <div class="table-responsive main-table" *ngIf="reportType == 2 && comn_type == 4" 
            style="width: 90%; margin-left:auto;margin-right:auto;"
            id="accordion">
                  <h5>{{'collectionReport.tabularView' | translate}}<span class=" pull-right">
                        <button class="btn btn-primary-new export-btn" (click)="exportData()">
                              {{'collectionReport.export' | translate}}</button>
                  </span></h5>
                  
                  <table class="table table-bordered table-striped">
                        <thead>
                              <th>{{'collectionReport.month' | translate}}</th>
                              <th>{{'viewCollections.cancellation' | translate}}</th>
                              <!-- <th>{{'collectionReport.IVAAmount' | translate}}</th> -->
                        </thead>
                        <tbody *ngFor="let item of commissionsss; let i=index">
                              <tr>
                                    <td>{{item.label}}</td>
                                    <td>
                                          {{(item.expected || 0) | currency}}
                                    </td>
                                    <!-- <td>
                                          {{(item.iva_amount || 0) | currency}}
                                    </td> -->
                              </tr>
                        </tbody>
                  </table>
                   <div class="padding20 center" *ngIf="items?.length == 0">
                       <img src="assets/img/404-error.png">
                 </div>
            </div>
              <div class="table-responsive main-table" *ngIf="reportType == 2 && comn_type != 4" 
              style="width: 90%; margin-left:auto;margin-right:auto;"
              id="accordion">
                    <h5>{{'collectionReport.tabularView' | translate}}<span class=" pull-right">
                          <button class="btn btn-primary-new export-btn" (click)="exportData()">
                                {{'collectionReport.export' | translate}}</button>
                    </span></h5>
                    
                    <table class="table table-bordered table-striped">
                          <thead>
                                <th>{{'collectionReport.month' | translate}}</th>
                                <th>{{'collectionReport.commissionAmt' | translate}}</th>
                                <th>{{'collectionReport.IVAAmount' | translate}}</th>
                          </thead>
                          <tbody *ngFor="let item of items; let i=index">
                                <tr>
                                      <td>{{item.label}}</td>
                                      <td (click)="getCommission(item, i)"><a class="color-changed" 
                                          data-toggle="collapse" data-target="#collapseOne{{i}}" 
                                          data-parent="#accordion" 
                                          aria-expanded="true" aria-controls="collapseOne" 
                                          href="#collapseOne{{i}}">
                                          <span><i class="fa fa-plus"></i> </span>&nbsp;&nbsp;{{(item.commission || 0) | currency}}
                                      </a></td>
                                      <td>{{(item.iva_amount || 0) | currency}}</td>
                                </tr>
                                <tr id="collapseOne{{i}}" class="collapse" data-parent="#accordion">
                                    <td colspan="10">
                                       <table [style.width]="'100%'">
                                             <thead>
                                                <th>{{'collectionReport.collection_id' | translate}}</th>
                                                <th>{{'collectionReport.property_name' | translate}}</th>
                                                <th>{{'collectionReport.buyername' | translate}}</th>
                                                <th>{{'collectionReport.datee' | translate}}</th>
                                                <th>{{'collectionReport.CommisionPaid' | translate}}</th>
                                                <th>{{'collectionReport.IVAPaid' | translate}}</th>
                                                <th>{{'collectionReport.TOTAL' | translate}}</th>
                                             </thead>
                                             <tbody *ngFor="let commission of commissions; let i=index">
                                             <td><span class="green-color cursor-pointer" routerLink="/dashboard/collections/view-collections/{{commission.id}}">{{commission.id}}</span></td>
                                             <td><span>{{commission.name}}</span></td>
                                             <td><span>{{commission.buyer_name}}</span></td>
                                             <td><span>{{commission.payment_date}}</span></td>
                                             <td><span>{{(commission.amount || 0) | currency}}</span></td>
                                             <td><span>{{(commission.iva_amount || 0) | currency}}</span></td>
                                             <td><span>{{(commission.amount + commission.iva_amount || 0) | currency}}</span></td>
                                          </tbody>
                                       </table>
                                       <div class="padding20 center" *ngIf="commissions?.length == 0">
                                          <img src="assets/img/404-error.png">
                                    </div>
                                    </td>
                              </tr>
                          </tbody>
                    </table>
                     <div class="padding20 center" *ngIf="items?.length == 0">
                         <img src="assets/img/404-error.png">
                   </div>
              </div>
              <!-- <br/>
              <div class="table-responsive main-table" *ngIf="reportType == 2"
              style="width: 90%; margin-left:auto;margin-right:auto;" id="accordion">
              <h5>{{'collectionReport.tabularView' | translate}}<span class=" pull-right">
                          <button class="btn btn-primary-new export-btn"
                                (click)="exportData()">{{'collectionReport.export' | translate}}</button>
                    </span></h5>
              <table class="table table-bordered table-striped">
                    <thead>
                          <th>{{'collectionReport.month' | translate}}</th>
                          <th>{{'collectionReport.expectedAmt' | translate}}</th>
                          <th>{{'collectionReport.actualAmt' | translate}}</th>
                    </thead>
                    <tbody *ngFor="let item of expectedActual; let i=index">
                          <tr >
                                <td (click)="getCashFlowInfo(item, i)"> <a class="color-changed" 
                                      data-toggle="collapse" data-target="#collapseTwo{{i}}" 
                                      data-parent="#accordion" 
                                      aria-expanded="true" aria-controls="collapseTwo" 
                                      href="#collapseTwo{{i}}">
                                      <span><i class="fa fa-plus"></i> </span>&nbsp;&nbsp;{{item.label}}
                                  </a></td>
                                <td>{{(item.expected || 0) | currency}}</td>
                                <td>{{(item.actual || 0) | currency}}</td>
                          </tr>
                          <tr id="collapseTwo{{i}}" class="collapse" data-parent="#accordion">
                                <td colspan="10">
                                   <table [style.width]="'100%'">
                                         <thead>
                                            <th>{{'collectionReport.collection_id' | translate}}</th>
                                            <th>{{'collectionReport.property_name' | translate}}</th>
                                            <th>{{'collectionReport.buyername' | translate}}</th>
                                            <th>{{'collectionReport.datee' | translate}}</th>
                                            <th>{{'collectionReport.amountPaid' | translate}}</th>
                                         </thead>
                                         <tbody *ngFor="let cashFlowInfo of cashFlowInfos; let i=index">
                                            <td><span>{{cashFlowInfo.id}}</span></td>
                                            <td><span>{{cashFlowInfo.name}}</span></td>
                                            <td><span>{{cashFlowInfo.buyer_name}}</span></td>
                                            <td><span>{{cashFlowInfo.payment_date}}</span></td>
                                            <td><span>{{(cashFlowInfo.amount || 0) | currency}}</span></td>
                                         </tbody>
                                   </table>
                                </td>
                          </tr>
                          
                          
                    </tbody>
              <tbody>
                    <tr>
                          <th style="font-weight: bold;color: black;">{{'dashboard.total' | translate}}:</th>
                          <td>{{(expectedTotal || 0) | currency}}</td>
                          <td>{{(actualTotal || 0) | currency}}</td>
                    </tr> </tbody>
              </table>
        </div> -->
      </div>

</div>