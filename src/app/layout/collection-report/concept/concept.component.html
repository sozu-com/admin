
<div class="container-fluid">
  <div class="row">
     <div class="col-md-4">
           <div class="form-group">
                  <h5>{{'collectionReport.conceptReport' | translate}}</h5>
           </div>
     </div>
  </div>

  <hr>
  

<div class="row">
  <div class="col-lg-2 col-md-2">
        <div class="form-group">
           <label>{{'collectionReport.developer' | translate}}</label>
           <div class="clearfix"></div>
            <ng-multiselect-dropdown class="section-section2 multi-select"
                  [placeholder]="''"
                  [data]="developers"
                  [(ngModel)]="selectedDevelopers"
                  [settings]="singleDropdownSettings"
                  (onDeSelect)="onSelectDeveloper(0, $event)"
                  (onSelect)="onSelectDeveloper(1, $event)"
                  (onSelectAll)="onSelectAll($event)">
            </ng-multiselect-dropdown>
        <div class="clearfix"></div>
        </div>
  </div>

  <div class="col-lg-2 col-md-2">
        <div class="form-group">
           <label>{{'collectionReport.project' | translate}}</label>
        <div class="clearfix"></div>
            <ng-multiselect-dropdown class="section-section2 multi-select"
                  [placeholder]="''"
                  [data]="projects"
                  [(ngModel)]="selctedProjects"
                  [settings]="multiDropdownSettings"
                  (onDeSelect)="onItemDeSelect('projects', $event)"
                  (onSelect)="onItemSelect('selctedProjects', $event)"
                  (onSelectAll)="onSelectAll($event)">
            </ng-multiselect-dropdown>
        <div class="clearfix"></div>
        </div>
  </div>

  <div class="col-lg-2 col-md-2">
     <div class="form-group marginB0">
        <label>{{'collectionReport.currency' | translate}}</label>
           <div class="clearfix"></div>
               <ng-multiselect-dropdown class="section-section2 multi-select"
                     [placeholder]="''"
                     [data]="currencies"
                     [(ngModel)]="selectedCurrencies"
                     [settings]="multiDropdownSettings"
                     (onDeSelect)="onItemDeSelect('currencies', $event)"
                     (onSelect)="onItemSelect('selectedCurrencies', $event)"
                     (onSelectAll)="onSelectAll($event)">
               </ng-multiselect-dropdown>
           <div class="clearfix"></div>      
     </div>
  </div>

  <div class="col-lg-2 col-md-2">
     <div class="form-group marginB0">
        <label>{{'collectionReport.concept1' | translate}}</label>
           <div class="clearfix"></div>
               <ng-multiselect-dropdown class="section-section2 multi-select"
                     [placeholder]="''"
                     [data]="paymentChoices"
                     [(ngModel)]="selctedConcepts"
                     [settings]="multiDropdownSettings"
                     (onDeSelect)="onItemDeSelect('paymentChoices', $event)"
                     (onSelect)="onItemSelect('selctedConcepts', $event)"
                     (onSelectAll)="onSelectAll($event)">
               </ng-multiselect-dropdown>
           <div class="clearfix"></div>      
     </div>
  </div>
</div>

<div class="row">
      <div class="col-lg-2 col-md-2">
            <div class="form-group">
            <label>{{'collectionReport.start_date' | translate}}</label>
            <p-calendar dateFormat="dd/M/yy" [locale]="locale" showIcon="true" [(ngModel)]="input.start_date" [maxDate]="today" 
            showButtonBar="true" class="coll-report-calendar" [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2040"></p-calendar>
            </div>
      </div>
      <div class="col-lg-2 col-md-2">
            <div class="form-group">
            <label>{{'collectionReport.end_date' | translate}}</label>
            <p-calendar dateFormat="dd/M/yy" [locale]="locale" showIcon="true" [(ngModel)]="input.end_date" [maxDate]="today" 
            showButtonBar="true" class="coll-report-calendar" [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2040"></p-calendar>
            </div>
      </div>
  
      <div class="col-lg-1 col-md-2">
            <div class="form-group btn-cont">
            <label style="display: block; margin-top: 3px;">&nbsp;</label>
            <button type="button" (click)="getListing()" class="btn btn-primary-new width100P P86">{{'collectionReport.apply' | translate}}</button>
            </div>
      </div>
    
      <div class="col-lg-1 col-md-2">
            <div class="form-group btn-cont">
            <label style="display: block; margin-top: 3px;">&nbsp;</label>
            <button type="button" (click)="resetFilters()" class="btn btn-primary-new width100P P86">{{'collectionReport.reset' | translate}}</button>
            </div>
      </div>
</div>

     <div class="cust-tabs">
      <div class="row flex-wrap-reverse">
      
      <div class="col-xl-10 col-lg-12 col-md-12 col-sm-12 col-12">
      </div>
      <div class="col-xl-2 col-lg-12 col-md-12 col-sm-12 col-12">
      <div class="add-new pull-right">
                  <!-- *ngIf="admin?.admin_acl['Project Management']?.can_create==1 || admin?.permissions?.can_data_collector==1"  -->
            <!-- <a 
            class="btn" href="javascript://" routerLink="/dashboard/collections/add-collection/0">{{'collectionReport.export' | translate}}</a> -->
      </div>
      </div>
      </div>
     <div class="tab-content white-bg">
        <div class="tab-pane active">
           <div class="tabel-section">
              <div class="table-responsive">
                 <table class="table table-striped table-align-left">
                    <thead>
                        <tr>
                           <th style="width:10%; text-align:left;">
                                 <b>{{'collectionReport.projectConcept' | translate}}</b>
                           </th>
                           <th *ngFor="let month of allMonths| slice:colCount" style="width:10%; text-align:left;">
                                 <b>{{month | date:'MMM, y'}}</b>
                           </th>
                           <th style="width:10%; text-align:left;">
                                 <b>{{'collectionReport.totalPaid' | translate}}</b>
                           </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of finalData; let i=index">
                        <td [ngClass]="{'text-bold': item?.key==1}"><span>{{item?.p || ('table.tr.td.NA' | translate)}}</span></td>
                        <td *ngFor="let m of allMonths| slice:colCount" [ngClass]="{'text-bold': item?.key==1}">
                              <span>{{(item[m] || 0) | currency}}</span>
                        </td>
                        <td [ngClass]="{'text-bold': item?.key==1}"><span>{{(item?.total || 0) | currency}}</span></td>
                        </tr>
                    </tbody>
                 </table>
                 <div class="padding20 center" *ngIf="finalData?.length == 0">
                       <img src="assets/img/404-error.png">
                 </div>
              </div>
           </div>
        </div>
     </div>
  </div>
</div>
