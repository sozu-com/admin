<ngx-loading [show]="parameter.loading"></ngx-loading>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-6 col-6">
          <div class="title-group">
              <h5>Access Control Mgt.</h5>
              <p>Showing {{parameter.items?.length}} out of {{parameter.total}}</p>
          </div>
        </div>
        <div class="col-md-6 col-6">
          <div class="btn-cont text-right">
              <a *ngIf="admin?.admin_acl['Access Controls']?.can_create==1" class="btn btn-primary" href="javascript://" routerLink="/dashboard/access-control-mgt/add-acl-user/0">+Add New</a>
          </div>
        </div>
    </div>
  
    <div class="white-bg">
        <div class="tabel-section">
          <div class="table-responsive">
            <table class="table table-striped table-align-left">
              <tr>
                <th style="width:6%">&nbsp;</th>
                <th style="width:20%">
                  <div class="table-search">
                      <label>Name</label>
                      <div class="searh-3">
                        <input type="text" [(ngModel)]="parameter.name" (keyup.enter)="getAclUsers(parameter.page, parameter.name, parameter.phone, parameter.email)" name="">
                        <button *ngIf="parameter.name" (click)="getAclUsers(parameter.page, parameter.name, parameter.phone, parameter.email)"><i class="fa fa-search"></i></button>
                      </div>
                  </div>
                </th>
                <th style="width:20%; text-align:left;">
                  <div class="table-search">
                      <label>Contact Number</label>
                      <div class="searh-3">
                        <input type="text" [(ngModel)]="parameter.phone" (keyup.enter)="getAclUsers(parameter.page, parameter.name, parameter.phone, parameter.email)" name="">
                        <button *ngIf="parameter.phone" (click)="getAclUsers(parameter.page, parameter.name, parameter.phone, parameter.email)"><i class="fa fa-search"></i></button>
                      </div>
                  </div>
                </th>
                <th style="width:20%">
                  <div class="table-search">
                      <label>Email Address</label>
                      <div class="searh-3">
                        <input type="text" [(ngModel)]="parameter.email" (keyup.enter)="getAclUsers(parameter.page, parameter.name, parameter.phone, parameter.email)" name="">
                        <button *ngIf="parameter.email" (click)="getAclUsers(parameter.page, parameter.name, parameter.phone, parameter.email)"><i class="fa fa-search"></i></button>
                      </div>
                  </div>
                </th>
                <th style="width:10%; vertical-align: top;">
                  <div class="table-search">
                    <label>Emp. ID</label>
                  </div>
                </th>
                <th style="width:14%">
                  &nbsp;
                </th>
              </tr>
        
              <tr *ngFor="let item of parameter.items| paginate: { itemsPerPage: parameter.itemsPerPage, currentPage: parameter.page, totalItems: parameter.total }; let i=index">
                <td> 
                  <!-- <img *ngIf="item.image && item.image!='image'" class="rounded-circle" [src]="item.image" alt="img">
                  <img *ngIf="!item.image || item.image=='image'" class="rounded-circle" src="assets/img/default_img.png" alt="img"> -->
                  <img [src]="item.image| img:'small'" class="rounded-circle" onerror='src="assets/img/default_img.png"' alt="img">
                </td>
                <td class="text-left">
                  <span class="name">
                    <a data-toggle="popover" data-placement="top" title="{{item.name}}">
                      {{item.name | titlecase}}
                      <!-- {{admin?.admin_acl['Access Controls']?.can_delete}} -->
                    </a>
                  </span>
                </td>
                <td class="text-left" *ngIf="item.phone">{{item.dial_code ? item.dial_code : constant.dial_code}}-{{item.phone}}</td>
                <td class="text-left" *ngIf="!item.phone">NA</td>
                <td class="text-left" *ngIf="item.email">{{item.email}}</td>
                <td class="text-left" *ngIf="!item.email">NA</td>
                <td>{{item.id}}</td>
                <td>
                  <div class="table-actions">
                    <!-- <a href="javascript://" routerLink="/dashboard/access-control-mgt/add-acl-user/{{item.id}}" class="icon-block edit-icon"><img src="assets/img/edit.png" alt="img"></a> -->
                    <!-- <a [ngClass]="{'display-none':admin?.admin_acl['Access Controls']?.can_update==0}" href="javascript://" (click)="editData(item, item.id)" class="icon-block edit-icon"><img src="assets/img/edit.png" alt="img"></a> -->
                    <!-- <a href="javascript://" class="icon-block block-icon unblock-bg"><img src="assets/img/block.png" alt="img"></a>
                    <a href="javascript://" class="icon-block block-icon"><img src="assets/img/unblock.png" alt="img"></a> -->
                    <button title="Edit Details" [disabled]="admin?.admin_acl['Access Controls']?.can_update==0" (click)="editData(item, item.id)" class="action-icon"><img src="assets/img/edit.png" alt="img"></button>
                    <button [disabled]="admin?.admin_acl['Access Controls']?.can_delete==0"
                        (click)="blockUnblockPopup(i, item.id, item.is_blocked==1?0:1, parameter.type)" 
                        title="{{item.is_blocked==1?'Unblock User':'Block User'}}" [ngClass]="{'unblock-bg':item.is_blocked==1}"
                        class="action-icon"><img src="assets/img/block.png" alt="img">
                    </button>
                  </div>
                </td>
              </tr>
            </table>
          </div>
        </div>
  
        <div class="center" *ngIf="parameter.total == 0">
          <img src="assets/img/404-error.png">
        </div>
    </div>
    
    <div class="btn-cont text-right marginT15" *ngIf="parameter.total">
      <pagination-controls class="my-pagination" (pageChange)="getPage($event)"></pagination-controls>
    </div>
    
  </div>
  
