{"version":3,"sources":["/home/cbl1002/Documents/realestate-admin/src/app/layout/appointments/appointments.component.css","/home/cbl1002/Documents/realestate-admin/src/app/layout/appointments/appointments.component.html","/home/cbl1002/Documents/realestate-admin/src/app/layout/appointments/appointments.component.ts","/home/cbl1002/Documents/realestate-admin/src/app/layout/appointments/appointments.module.ts"],"names":[],"mappings":"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","file":"12.chunk.js","sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/cbl1002/Documents/realestate-admin/src/app/layout/appointments/appointments.component.css\n// module id = ../../../../../src/app/layout/appointments/appointments.component.css\n// module chunks = 12","module.exports = \"\\n<div class=\\\"container-fluid\\\">\\n  <div class=\\\"row\\\">\\n      <div class=\\\"col-md-6\\\">\\n        <div class=\\\"title-group\\\">\\n            <h5>Appointments</h5>\\n            <p></p>\\n        </div>\\n      </div>\\n  </div>\\n\\n<div class=\\\"white-bg padding20\\\">\\n   <!-- <p class=\\\"p14\\\">My appointments</p> -->\\n   <div class=\\\"row\\\">\\n      <div class=\\\"col-4\\\">\\n        <select class=\\\"form-control\\\" [(ngModel)]=\\\"parameter.year\\\">\\n          <option *ngFor=\\\"let y of yearList\\\" [value]=\\\"y\\\">{{y}}</option>\\n        </select> \\n      </div>\\n      <div class=\\\"col-4\\\">\\n        <select class=\\\"form-control\\\" [(ngModel)]=\\\"parameter.month\\\" (change)=\\\"getAppointments()\\\">\\n          <option *ngFor=\\\"let m of constant.months\\\" [value]=\\\"m.id\\\">{{m.name}}</option>\\n        </select> \\n      </div>\\n   </div>\\n   <div class=\\\"spacer30 clearfix\\\"></div>\\n   <ul class=\\\"month-date\\\">\\n     <li class=\\\"cursor-pointer\\\" *ngFor=\\\"let item of appointmentDates\\\" title=\\\"Click to view list\\\" (click)=\\\"meetings = item.meetings\\\">\\n      <span>{{item.day}}</span>\\n      <b>{{item.date}}</b>\\n      <span class=\\\"meeting-count\\\" [ngClass]=\\\"{'green':item.meeting_count > 0}\\\">{{item.meeting_count}}</span>\\n     </li>\\n   </ul>\\n   <div class=\\\"spacer30 clearfix\\\"></div>\\n   <div *ngFor=\\\"let item of meetings\\\">\\n      <div class=\\\"col-4 white-bg padding15 shadow-new\\\">\\n          <div class=\\\"appoint  marginT0\\\">\\n                        \\n              <div class=\\\"ap-row\\\">\\n                 <div class=\\\"ap-col\\\">\\n                    <p class=\\\"a-text\\\">{{item?.appointment_date|date :'shortTime'}}</p>\\n                    <p class=\\\"no-show\\\">{{item?.status?.name}}</p>\\n                 </div>\\n                 <div class=\\\"ap-col\\\">\\n                    <p class=\\\"a-text\\\">{{item?.lead?.user.name}}</p>\\n                    <p class=\\\"a-text\\\">{{item?.lead?.user.dial_code}} {{item?.lead?.user.phone}}</p>\\n                 </div>\\n                 <div class=\\\"ap-col\\\">\\n                    <button title=\\\"Edit Appointment\\\" [disabled]=\\\"admin?.admin_acl['Appointments']?.can_update==0\\\" (click)=\\\"openAppintment(item)\\\" class=\\\"action-icon float-right\\\">\\n                      <img src=\\\"./../../../../assets/img/edit.png\\\" alt=\\\"img\\\">\\n                    </button>\\n                 </div>\\n              </div>      \\n           </div>\\n          \\n        </div>\\n   </div>\\n</div>\\n</div>\\n\\n\\n<!-- add note modal -->\\n<a data-toggle=\\\"modal\\\" data-target=\\\"#editAppointment\\\" #modalOpen></a>\\n<div class=\\\"modal animated\\\" id=\\\"editAppointment\\\">\\n    <div class=\\\"modal-dialog fadeIndown\\\">\\n      <div class=\\\"modal-content\\\">\\n        <div class=\\\"modal-header modal-header-new\\\">\\n            <h4 class=\\\"modal-title\\\">Appointment</h4>\\n            <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" #modalClose>&times;</button>\\n        </div>\\n          <div class=\\\"modal-body modal-body-new model-appointment\\\">\\n            <div class=\\\"row\\\">\\n\\n              <div class=\\\"col-sm-12 col-12\\\">\\n                  <div class=\\\"user fig-block upload-cover-img\\\">\\n                  <img class=\\\"floor-plan\\\" [src]=\\\"appointmentNew?.lead?.user?.image\\\" onerror=\\\"this.src='assets/img/default_img.png'\\\" />\\n                  <input accept=\\\"image/*\\\" name=\\\"\\\" type=\\\"file\\\">\\n                  </div>\\n              </div>\\n              <div class=\\\"col-sm-12 col-12 text-center\\\" >\\n                  <p class=\\\"p18\\\">{{appointmentNew?.lead?.user?.name}}</p>\\n                  <p class=\\\"p14\\\">{{appointmentNew?.lead?.user?.dial_code}} {{appointmentNew?.lead?.user?.phone}}</p>\\n              </div>\\n\\n              <div class=\\\"col-12\\\">\\n                <div class=\\\"form-group-2\\\">\\n                   <div class=\\\"form-group\\\">\\n                      <label>Date and Time</label>\\n                     <input class=\\\"form-control\\\" type=\\\"datetime\\\" [ngModel] =\\\"appointmentNew.appointment_date | date:'yyyy-MM-dd H:m:s'\\\" (ngModelChange)=\\\"appointmentNew.appointment_date = $event\\\">\\n                  </div>\\n                </div>\\n              </div>\\n              <div class=\\\"col-12\\\">\\n                <div class=\\\"form-group-2\\\">\\n                    <div class=\\\"form-group\\\">\\n                      <label>Status</label>\\n                      <select class=\\\"form-control\\\" [(ngModel)]=\\\"appointmentNew.status_id\\\">\\n                        <option *ngFor=\\\"let item of appointStatuses\\\" [value]=\\\"item.id\\\">{{item.name}}</option>\\n                      </select>\\n                  </div>\\n                </div>\\n              </div>\\n              <div class=\\\"col-12\\\">\\n                  <div class=\\\"btn-cont text-right\\\">\\n                      <button (click)=\\\"saveAppointment()\\\" type=\\\"submit\\\" class=\\\"btn btn-primary\\\">Save Appointment</button>\\n                  </div>\\n              </div>\\n            </div>\\n          </div>\\n  \\n      </div>\\n    </div>\\n  </div>\\n\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/cbl1002/Documents/realestate-admin/src/app/layout/appointments/appointments.component.html\n// module id = ../../../../../src/app/layout/appointments/appointments.component.html\n// module chunks = 12","import { Component, OnInit , ViewChild, ElementRef} from '@angular/core';\nimport { AdminService } from '../../services/admin.service';\nimport { IProperty } from '../../common/property';\nimport { Constant } from '../../common/constants';\n\n@Component({\n  selector: 'app-appointments',\n  templateUrl: './appointments.component.html',\n  styleUrls: ['./appointments.component.css']\n})\nexport class AppointmentsComponent implements OnInit {\n\n  @ViewChild('modalOpen') modalOpen: ElementRef;\n  @ViewChild('modalClose') modalClose: ElementRef;\n\n  parameter: IProperty= {};\n  appointmentDates: any= [];\n  appointStatuses: any= [];\n  meetings: any= [];\n  yearList: any= [];\n  appointmentBack: any;\n  appointmentNew: any= {};\n\n  constructor(\n    private admin: AdminService,\n    public constant: Constant\n  ) {\n    const d = new Date();\n    console.log(d);\n    this.parameter.year = d.getFullYear();\n    this.parameter.month = d.getMonth() + 1;\n    this.getAppointments();\n    this.getAppointmentStatuses();\n    this.yearList.push(this.parameter.year);\n    this.yearList.push(this.parameter.year + 1);\n    // this.yearList.push(this.parameter.year + 2);\n    this.yearList.unshift(this.parameter.year - 1);\n    console.log(this.parameter);\n   }\n\n  ngOnInit() {\n\n  }\n  getAppointmentStatuses() {\n    this.admin.postDataApi('getAppointmentStatuses', {}).subscribe(r => {\n      console.log('Status', r);\n      this.appointStatuses = r['data'];\n    });\n\n  }\n\n  getAppointments() {\n    this.admin.postDataApi('leads/getAllAppointments', this.parameter).subscribe(r => {\n      console.log('appointments', r);\n      this.appointmentDates = r['data'];\n    });\n  }\n\n  openAppintment(item) {\n    this.modalOpen.nativeElement.click();\n    this.appointmentBack = item;\n    this.appointmentNew = JSON.parse(JSON.stringify(item));\n    this.appointmentNew.status_id = this.appointmentNew.status.id;\n  }\n\n  saveAppointment() {\n    this.appointmentDates = [];\n    this.meetings = [];\n\n    this.modalClose.nativeElement.click();\n    console.log(this.appointmentNew);\n    const input = {\n      appointment_id: this.appointmentNew.id,\n      status_id: this.appointmentNew.status_id,\n      appointment_date: this.appointmentNew.appointment_date\n    };\n    this.admin.postDataApi('leads/updateAppointmentStatus', input).subscribe(r => {\n      console.log('Updated', r);\n      this.getAppointments();\n    }, error => {\n      console.log(error);\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/cbl1002/Documents/realestate-admin/src/app/layout/appointments/appointments.component.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { LoadingModule, ANIMATION_TYPES } from 'ngx-loading';\nimport { NgxPaginationModule } from 'ngx-pagination';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { AclUserGuard } from '../../guards/acl-user.guard';\nimport { AuthGuard } from '../../guards/auth.guard';\nimport { AppointmentsComponent } from './appointments.component';\n\nconst routes: Routes = [\n  { path: '', component: AppointmentsComponent,\n    canActivate: [AclUserGuard], data: {roles: ['Appointments', 'can_read', '']}}\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes),\n    CommonModule,\n    LoadingModule.forRoot({\n      animationType: ANIMATION_TYPES.rectangleBounce,\n      primaryColour: '#00B96F'\n    }),\n    NgxPaginationModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  declarations: [\n    AppointmentsComponent\n  ]\n})\n\nexport class AppointmentsModule { }\n\n\n\n// WEBPACK FOOTER //\n// /home/cbl1002/Documents/realestate-admin/src/app/layout/appointments/appointments.module.ts"],"sourceRoot":"webpack:///"}