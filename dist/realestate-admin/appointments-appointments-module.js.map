{"version":3,"sources":["webpack:///./src/app/layout/appointments/appointments.component.css","webpack:///./src/app/layout/appointments/appointments.component.html","webpack:///./src/app/layout/appointments/appointments.component.ts","webpack:///./src/app/layout/appointments/appointments.module.ts"],"names":[],"mappings":"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","file":"appointments-appointments-module.js","sourcesContent":["module.exports = \"\"","module.exports = \"\\n<div class=\\\"container-fluid\\\">\\n  <div class=\\\"row\\\">\\n      <div class=\\\"col-md-6\\\">\\n        <div class=\\\"title-group\\\">\\n          <h5>{{'viewAppointments.label' | translate}}</h5>\\n          <p></p>\\n        </div>\\n      </div>\\n  </div>\\n\\n<div class=\\\"white-bg padding20\\\">\\n   <!-- <p class=\\\"p14\\\">My appointments</p> -->\\n   <div class=\\\"row\\\">\\n      <div class=\\\"col-4\\\">\\n        <select class=\\\"form-control\\\" [(ngModel)]=\\\"parameter.year\\\">\\n          <option *ngFor=\\\"let y of yearList\\\" [value]=\\\"y\\\">{{y}}</option>\\n        </select> \\n      </div>\\n      <div class=\\\"col-4\\\">\\n        <select class=\\\"form-control\\\" [(ngModel)]=\\\"parameter.month\\\" (change)=\\\"getAppointments()\\\">\\n          <option *ngFor=\\\"let m of constant.months\\\" [value]=\\\"m.id\\\">{{m.name}}</option>\\n        </select> \\n      </div>\\n   </div>\\n   <div class=\\\"spacer30 clearfix\\\"></div>\\n   <ul class=\\\"month-date\\\">\\n     <li class=\\\"cursor-pointer\\\" *ngFor=\\\"let item of appointmentDates\\\" title=\\\"{{'table.title.clickToViewDetails' | translate}}\\\" (click)=\\\"meetings = item.meetings\\\">\\n      <span>{{item.day}}</span>\\n      <b>{{item.date}}</b>\\n      <span *ngIf=\\\"item.meeting_count>0\\\" class=\\\"meeting-count\\\" [ngClass]=\\\"{'green':item.meeting_count > 0}\\\">{{item.meeting_count}}</span>\\n     </li>\\n   </ul>\\n   <div class=\\\"spacer30 clearfix\\\"></div>\\n   <div *ngFor=\\\"let item of meetings\\\">\\n      <div class=\\\"col-4 white-bg padding15 shadow-new\\\">\\n          <div class=\\\"appoint  marginT0\\\">\\n                        \\n              <div class=\\\"ap-row\\\">\\n                 <div class=\\\"ap-col\\\">\\n                    <p class=\\\"a-text\\\">{{item?.appointment_date|date :'shortTime'}}</p>\\n                    <p class=\\\"no-show\\\">{{item?.status?.name}}</p>\\n                 </div>\\n                 <div class=\\\"ap-col\\\">\\n                    <p class=\\\"a-text\\\">{{item?.lead?.user.name | titlecase}}</p>\\n                    <p class=\\\"a-text\\\">{{item?.lead?.user.dial_code}} {{item?.lead?.user.phone}}</p>\\n                 </div>\\n                 <div class=\\\"ap-col\\\">\\n                    <button title=\\\"{{'table.title.editDetails' | translate}}\\\" [disabled]=\\\"admin?.admin_acl['Appointments']?.can_update==0\\\" (click)=\\\"openAppintment(item)\\\" class=\\\"action-icon float-right\\\">\\n                      <img src=\\\"assets/img/edit.png\\\" alt=\\\"img\\\">\\n                    </button>\\n                 </div>\\n              </div>      \\n           </div>\\n          \\n        </div>\\n   </div>\\n</div>\\n</div>\\n\\n\\n<!-- add note modal -->\\n<a data-toggle=\\\"modal\\\" data-target=\\\"#editAppointment\\\" #modalOpen></a>\\n<div class=\\\"modal animated\\\" id=\\\"editAppointment\\\">\\n    <div class=\\\"modal-dialog fadeIndown\\\">\\n      <div class=\\\"modal-content\\\">\\n        <div class=\\\"modal-header modal-header-new\\\">\\n            <h4 class=\\\"modal-title\\\">{{'viewAppointments.appointment' | translate}}</h4>\\n            <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" #modalClose>&times;</button>\\n        </div>\\n          <div class=\\\"modal-body modal-body-new model-appointment\\\">\\n            <div class=\\\"row\\\">\\n\\n              <div class=\\\"col-sm-12 col-12\\\">\\n                  <div class=\\\"user fig-block upload-cover-img\\\">\\n                  <img class=\\\"floor-plan\\\" [src]=\\\"appointmentNew?.lead?.user?.image\\\" onerror=\\\"this.src='assets/img/default_img.png'\\\" />\\n                  <input accept=\\\"image/*\\\" name=\\\"\\\" type=\\\"file\\\">\\n                  </div>\\n              </div>\\n              <div class=\\\"col-sm-12 col-12 text-center\\\" >\\n                  <p class=\\\"p18\\\">{{appointmentNew?.lead?.user?.name | titlecase}}</p>\\n                  <p class=\\\"p14\\\">{{appointmentNew?.lead?.user?.dial_code}} {{appointmentNew?.lead?.user?.phone}}</p>\\n              </div>\\n\\n              <div class=\\\"col-12\\\">\\n                <div class=\\\"form-group-2\\\">\\n                   <div class=\\\"form-group\\\">\\n                    <label>{{'viewAppointments.dateTime' | translate}}</label>\\n                    <input class=\\\"form-control\\\" type=\\\"datetime-local\\\" [ngModel] =\\\"appointmentNew.appointment_date | date:'yyyy-MM-ddTHH:mm'\\\" (ngModelChange)=\\\"appointmentNew.appointment_date = $event\\\">\\n                  </div>\\n                </div>\\n              </div>\\n              <div class=\\\"col-12\\\">\\n                <div class=\\\"form-group-2\\\">\\n                    <div class=\\\"form-group\\\">\\n                      <label>{{'viewAppointments.status' | translate}}</label>\\n                      <select class=\\\"form-control\\\" [(ngModel)]=\\\"appointmentNew.status_id\\\">\\n                        <option *ngFor=\\\"let item of appointStatuses\\\" [value]=\\\"item.id\\\">{{item.name}}</option>\\n                      </select>\\n                  </div>\\n                </div>\\n              </div>\\n              <div class=\\\"col-12\\\">\\n                  <div class=\\\"btn-cont text-right\\\">\\n                      <button (click)=\\\"saveAppointment()\\\" type=\\\"submit\\\" class=\\\"btn btn-primary\\\">{{'viewAppointments.saveApp' | translate}}</button>\\n                  </div>\\n              </div>\\n            </div>\\n          </div>\\n  \\n      </div>\\n    </div>\\n  </div>\\n\\n\"","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { AdminService } from '../../services/admin.service';\nimport { IProperty } from '../../common/property';\nimport { Constant } from '../../common/constants';\nimport { NgxSpinnerService } from 'ngx-spinner';\n\n@Component({\n  selector: 'app-appointments',\n  templateUrl: './appointments.component.html',\n  styleUrls: ['./appointments.component.css']\n})\nexport class AppointmentsComponent implements OnInit {\n\n  @ViewChild('modalOpen') modalOpen: ElementRef;\n  @ViewChild('modalClose') modalClose: ElementRef;\n\n  parameter: IProperty = {};\n  appointmentDates: any = [];\n  appointStatuses: any = [];\n  meetings: any = [];\n  yearList: any = [];\n  appointmentBack: any;\n  appointmentNew: any = {};\n\n  constructor(\n    private admin: AdminService,\n    private spinner: NgxSpinnerService,\n    public constant: Constant\n  ) {\n    const d = new Date();\n    this.parameter.year = d.getFullYear();\n    this.parameter.month = d.getMonth() + 1;\n    this.getAppointments();\n    this.getAppointmentStatuses();\n    this.yearList.push(this.parameter.year);\n    this.yearList.push(this.parameter.year + 1);\n    // this.yearList.push(this.parameter.year + 2);\n    this.yearList.unshift(this.parameter.year - 1);\n  }\n\n  ngOnInit() {\n\n  }\n  getAppointmentStatuses() {\n    this.admin.postDataApi('getAppointmentStatuses', {}).subscribe(r => {\n      this.appointStatuses = r['data'];\n    });\n\n  }\n\n  getAppointments() {\n    this.meetings = [];\n    this.spinner.show();\n    this.admin.postDataApi('leads/getAllAppointments', this.parameter).subscribe(r => {\n      this.spinner.hide();\n      this.appointmentDates = r['data'];\n    }, error => {\n      this.spinner.hide();\n    });\n  }\n\n  openAppintment(item) {\n    this.modalOpen.nativeElement.click();\n    this.appointmentBack = item;\n    this.appointmentNew = JSON.parse(JSON.stringify(item));\n    this.appointmentNew.status_id = this.appointmentNew.status.id;\n  }\n\n  saveAppointment() {\n    this.appointmentDates = [];\n    this.meetings = [];\n\n    this.modalClose.nativeElement.click();\n    const input = {\n      appointment_id: this.appointmentNew.id,\n      status_id: this.appointmentNew.status_id,\n      appointment_date: this.appointmentNew.appointment_date\n    };\n    this.spinner.show();\n    this.admin.postDataApi('leads/updateAppointmentStatus', input).subscribe(r => {\n      // this.spinner.hide();\n      this.getAppointments();\n    }, error => {\n      this.spinner.hide();\n    });\n  }\n\n}\n","// third party libraries\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { NgxSpinnerModule } from 'ngx-spinner';\nimport { NgxPaginationModule } from 'ngx-pagination';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n// general components\nimport { AclUserGuard } from '../../guards/acl-user.guard';\nimport { AppointmentsComponent } from './appointments.component';\nimport { TranslateModule } from '@ngx-translate/core';\n\nconst routes: Routes = [\n  {\n    path: '', component: AppointmentsComponent,\n    canActivate: [AclUserGuard], data: { roles: ['Appointments', 'can_read', ''] }\n  }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes),\n    CommonModule,\n    NgxSpinnerModule,\n    NgxPaginationModule,\n    FormsModule,\n    ReactiveFormsModule,\n    TranslateModule\n  ],\n  declarations: [\n    AppointmentsComponent\n  ]\n})\n\nexport class AppointmentsModule { }\n"],"sourceRoot":""}