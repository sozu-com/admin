(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{BmJZ:function(l,n,e){"use strict";e.d(n,"a",function(){return i});var t=e("gFX4"),a=e("nhiD"),i=(e("AJ6+"),e("OlR4"),e("XY7g"),function(){function l(l,n,e,t,a,i){this.element=l,this.admin=n,this.cs=e,this.model=t,this.constant=a,this.spinner=i,this.durationInSec=0,this.videoObj={thumbnail:"",original:""},this.loadmore=!0,this.loadmoring=!1,this.scrollbarOptions={axis:"y",theme:"dark"},this.parameter={}}return l.prototype.ngOnInit=function(){var l=this;this.parameter.messages=[],setTimeout(function(){l.initSocket(),l.sent_as===l.constant.userType.notary||l.sent_as===l.constant.userType.bank?l.getLeadConversation(!1):l.getMessages()},100)},l.prototype.getLeadConversation=function(l){var n=this,e={lead_id:this.lead_id,other_sent_as:this.other_sent_as,other_id:this.user_id,sent_as:this.sent_as};l&&this.spinner.show(),this.admin.postDataApi("conversation/getLeadConversation",e).subscribe(function(l){n.spinner.hide(),l.data&&(n.parameter.messages=l.data[0].messages,n.parameter.messages.length<30&&(n.loadmore=!1),n.parameter.conversation_id=l.data[0].id,n.scrollToBottom())},function(l){n.spinner.hide()})},l.prototype.getMessages=function(){var l=this;this.admin.postDataApi("conversation/getMessages",{lead_id:this.lead_id,user_id:this.user_id,sent_as:this.sent_as}).subscribe(function(n){l.parameter.messages=n.data[0].messages,l.parameter.messages.length<30&&(l.loadmore=!1),l.parameter.conversation_id=n.data[0].id,l.scrollToBottom()})},l.prototype.initSocket=function(){var l=this;this.parameter.socket=t.connect(this.admin.socketUrl),this.parameter.socket.on("connect",function(n){l.parameter.socket_id=l.parameter.socket.id,l.parameter.connected=l.parameter.socket.connected,l.parameter.connected&&(l.parameter.socket.emit("add-admin",{admin_id:l.admin_id,socket_id:l.parameter.socket_id,device_id:l.admin.deviceId+"_"+l.admin_id},function(l){}),l.parameter.socket.on("message",function(n){n.data.conversation_id===l.parameter.conversation_id&&(l.scrollToBottom(),l.parameter.messages.push(n.data))}))})},l.prototype.scrollToBottom=function(){setTimeout(function(){$(".chat-area").mCustomScrollbar("scrollTo","bottom")},200)},l.prototype.updateModel=function(l){this.model[l]="",this.model.message_type=1},l.prototype.js_yyyy_mm_dd_hh_mm_ss=function(){var l=new Date,n=""+l.getFullYear(),e=""+(l.getMonth()+1);1===e.length&&(e="0"+e);var t=""+l.getDate();1===t.length&&(t="0"+t);var a=""+l.getHours();1===a.length&&(a="0"+a);var i=""+l.getMinutes();1===i.length&&(i="0"+i);var u=""+l.getSeconds();return 1===u.length&&(u="0"+u),n+"-"+e+"-"+t+" "+a+":"+i+":"+u},l.prototype.onSelectFile=function(l,n){var e=this;if(n.target.files[0].size>this.constant.fileSizeLimit)swal("Error",this.constant.errorMsg.FILE_SIZE_EXCEEDS,"error");else{this.optionsButton.nativeElement.click();var t=new a.a;t.message=this.textMessage,t.message_type=2,t.loading=!0,t.uid=Math.random().toString(36).substr(2,15),t.conversation_id=this.parameter.conversation_id,t.conversation_user={admin_id:this.admin_id},t.admin_id=this.admin_id;var i=new Date;if(t.updated_at=i.toUTCString(),this.parameter.messages.push(t),setTimeout(function(){e.scrollToBottom()},100),n.target.files&&n.target.files[0]){var u=new FileReader;u.onload=function(a){e.image=a.target.result,t[l]=a.target.result,setTimeout(function(){e.scrollToBottom()},100),e.cs.saveImage(n.target.files[0]).subscribe(function(l){t.image=l.data.image,e.sendMessage(t)})},u.readAsDataURL(n.target.files[0])}}},l.prototype.saveAttachment=function(l){var n=this;if(l.target.files[0].size>this.constant.fileSizeLimit)swal("Error",this.constant.errorMsg.FILE_SIZE_EXCEEDS,"error");else{this.optionsButton.nativeElement.click();var e=new a.a;e.message=this.textMessage,e.message_type=4,e.loading=!0,e.uid=Math.random().toString(36).substr(2,15),e.conversation_id=this.parameter.conversation_id,e.conversation_user={admin_id:this.admin_id},e.admin_id=this.admin_id,e.attachment_name=l.target.files[0].name;var t=new Date;e.updated_at=t.toUTCString(),this.parameter.messages.push(e),setTimeout(function(){n.scrollToBottom()},100),this.cs.saveAttachment(l.target.files[0]).subscribe(function(l){e.attachment=l.data.name,n.sendMessage(e)})}},l.prototype.playVideo=function(l){this.parameter.messages[l].play=!0},l.prototype.showCanvas=function(l){var n=this;if(l.target.files[0].size>this.constant.fileSizeLimit)swal("Error",this.constant.errorMsg.FILE_SIZE_EXCEEDS,"error");else{this.optionsButton.nativeElement.click();var e=new a.a;e.message=this.textMessage,e.message_type=3,e.loading=!0,e.uid=Math.random().toString(36).substr(2,15),e.conversation_id=this.parameter.conversation_id;var t=new Date;e.updated_at=t.toUTCString(),e.conversation_user={admin_id:this.admin_id},e.admin_id=this.admin_id,this.parameter.messages.push(e),setTimeout(function(){n.scrollToBottom()},100),setTimeout(function(){n.video=document.getElementById("video1");var t=new FileReader,a=n.element.nativeElement.querySelector(".video55");t.onload=(function(n){var t=this;a.src=n.target.result;var i=setInterval(function(){4===a.readyState&&(t.durationInSec=a.duration.toFixed(0),setTimeout(function(){t.newcanvas(a,l.target.files[0],e)},3e3),clearInterval(i))},1e3)}).bind(n),t.readAsDataURL(l.target.files[0])},1e3)}},l.prototype.newcanvas=function(l,n,e){var t=this,a=document.getElementById("canvas"),i=(a.getContext("2d").drawImage(l,0,0,l.videoWidth,l.videoHeight,0,0,a.width,a.height),a.toDataURL("image/jpeg"));e.image=i;var u=this.dataURLtoFile(i,"tempFile.png");this.cs.saveVideo(n,u).subscribe(function(l){e.video=l.data.video,e.image=l.data.thumb,t.sendMessage(e)},function(l){})},l.prototype.dataURLtoFile=function(l,n){for(var e=l.split(","),t=e[0].match(/:(.*?);/)[1],a=atob(e[1]),i=a.length,u=new Uint8Array(i);i--;)u[i]=a.charCodeAt(i);return new File([u],n,{type:t})},l.prototype.toUTCDate=function(l){return new Date(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds())},l.prototype.setText=function(){var l=this;if(!this.textMessage||!this.textMessage.trim())return!1;if(this.sent_as===this.constant.userType.csr_buyer&&(0!==Object.keys(this.admin.admin_acl).length&&0===this.admin.admin_acl["Buyer Lead Management"].can_update||0===this.admin.permissions.can_csr_buyer)||this.sent_as===this.constant.userType.inhouse_broker&&(0!==Object.keys(this.admin.admin_acl).length&&0===this.admin.admin_acl["Broker Lead Management"].can_update||0===this.admin.permissions.can_in_house_broker)||this.sent_as===this.constant.userType.notary&&(0!==Object.keys(this.admin.admin_acl).length&&0===this.admin.admin_acl["Notary Lead Management"].can_update||0===this.admin.permissions.can_noatary)||this.sent_as===this.constant.userType.bank&&(0!==Object.keys(this.admin.admin_acl).length&&0===this.admin.admin_acl["Bank Lead Management"].can_update||0===this.admin.permissions.can_bank))return!1;var n=new a.a;n.message=this.textMessage,n.message_type=1,n.loading=!0,n.uid=Math.random().toString(36).substr(2,15),n.conversation_id=this.parameter.conversation_id,n.conversation_user={admin_id:this.admin_id};var e=new Date;n.updated_at=e.toUTCString(),n.admin_id=this.admin_id,this.parameter.messages.push(n),this.textMessage="",setTimeout(function(){l.scrollToBottom()},100),this.sendMessage(n)},l.prototype.sendMessage=function(l){var n=this;l.sent_as=this.sent_as,1!=l.message_type||l.message?this.admin.postDataApi("conversation/sendMessage",l).subscribe(function(e){if(1==l.loading){l.loading=!1;var t=n.parameter.messages.findIndex(function(n){return n.uid==l.uid});n.parameter.messages[t]=e.data}setTimeout(function(){n.scrollToBottom()},100)},function(l){swal("Error",l.error.message,"error")}):swal("Error","Please enter some text.","error")},l.prototype.loadMore=function(l){var n=this;this.loadmoring=!0,this.admin.postDataApi("conversation/getMessages",{lead_id:this.lead_id,user_id:this.user_id,sent_as:this.sent_as,last_message_id:this.parameter.messages[0].id}).subscribe(function(e){n.loadmoring=!1,n.admin_id=l,e.data[0].messages.length<30&&(n.loadmore=!1),n.parameter.messages=e.data[0].messages.concat(n.parameter.messages)})},l.prototype.sendProperty=function(l){var n=new a.a;n.message=l.name+" with ",l.configuration.bedroom&&(n.message+=l.configuration.bedroom+" Bed "),l.configuration.bathroom&&(n.message+=this.constant.middleDot+l.configuration.bathroom+" Bath"),l.configuration.half_bathroom&&(n.message+=this.constant.middleDot+l.configuration.half_bathroom+" Half Bath"),l.property_type.name&&(n.message+=this.constant.middleDot+l.property_type.name),n.message+=" in "+l.building.name,n.message_type=5,n.property_id=l.id,n.image=l.image,n.property_url=l.property_url,n.loading=!0,n.uid=Math.random().toString(36).substr(2,15),n.conversation_id=this.parameter.conversation_id,n.conversation_user={admin_id:this.admin_id},this.parameter.messages.push(n);var e=new Date;n.updated_at=e.toUTCString(),this.sendMessage(n)},l}())},uMVi:function(l,n,e){"use strict";var t=e("CcnG"),a=e("Ip0R"),i=e("uM2D"),u=e("APq1"),s=e("gIcY"),o=e("LRqG"),r=e("GJ0d"),d=e("AJ6+"),c=e("XY7g");e("nhiD"),e("BmJZ"),e("OlR4"),e("miAi"),e.d(n,"a",function(){return m}),e.d(n,"b",function(){return D});var m=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function p(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"img",[["src","assets/img/loading-p.gif"]],null,null,null,null,null))],null,null)}function g(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","chat-load-more"]],null,[[null,"click"]],function(l,n,e){var t=!0,a=l.component;return"click"===n&&(t=!1!==a.loadMore(a.admin_id)&&t),t},null,null)),(l()(),t["\u0275ted"](-1,null,[" Previous Messages "])),(l()(),t["\u0275and"](16777216,null,null,1,null,p)),t["\u0275did"](3,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,3,0,n.component.loadmoring)},null)}function f(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"p",[["style","word-wrap: break-word;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](2,null,["",""]))],null,function(l,n){l(n,2,0,n.parent.context.$implicit.message)})}function h(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"div",[["class","loaderr"]],null,null,null,null,null))],null,null)}function _(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"a",[["data-lightbox","image"],["title","image"]],[[8,"href",4]],null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,0,"img",[["class","ui bordered small image"]],[[8,"src",4]],null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,h)),t["\u0275did"](4,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,4,0,n.parent.context.$implicit.loading)},function(l,n){l(n,0,0,t["\u0275inlineInterpolate"](1,"",n.parent.context.$implicit.image,"")),l(n,2,0,t["\u0275inlineInterpolate"](1,"",n.parent.context.$implicit.image,""))})}function v(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"img",[["class","vid-icon"],["src","assets/img/play-button.png"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.playVideo(l.parent.parent.context.index)&&t),t},null,null))],null,null)}function y(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"div",[["class","loaderr"]],null,null,null,null,null))],null,null)}function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","chat-vid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,6,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,0,"img",[["class","ui bordered small image"],["onerror","this.src='assets/img/placeholder.png'"]],[[8,"src",4]],null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,v)),t["\u0275did"](4,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,y)),t["\u0275did"](6,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](7,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(l,n){l(n,4,0,!n.parent.context.$implicit.loading),l(n,6,0,n.parent.context.$implicit.loading)},function(l,n){l(n,2,0,t["\u0275inlineInterpolate"](1,"",n.parent.context.$implicit.image,""))})}function b(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"video",[["autoplay",""],["controls",""],["type","video/mp4"]],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,0,0,t["\u0275inlineInterpolate"](1,"",n.parent.context.$implicit.video,""))})}function x(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"div",[["class","loaderr"]],null,null,null,null,null))],null,null)}function w(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"span",[["class","m-loader"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"img",[["class","ui bordered small image"],["src","assets/img/placeholder.png"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,x)),t["\u0275did"](3,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,3,0,n.parent.parent.context.$implicit.loading)},null)}function T(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"a",[["href","javascript://"],["target","_blank"]],[[8,"href",4]],null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,[""," "])),(l()(),t["\u0275eld"](4,0,null,null,0,"img",[["class","viewfull"],["src","assets/img/viewfull.png"]],null,null,null,null,null))],null,function(l,n){l(n,1,0,t["\u0275inlineInterpolate"](1,"",n.parent.parent.context.$implicit.attachment,"")),l(n,3,0,n.parent.parent.context.$implicit.attachment_name)})}function C(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","chat-shared-file"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,w)),t["\u0275did"](2,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,T)),t["\u0275did"](4,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,2,0,n.parent.context.$implicit.loading),l(n,4,0,!n.parent.context.$implicit.loading)},null)}function M(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"div",[["class","loaderr"]],null,null,null,null,null))],null,null)}function k(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,6,"a",[["target","_blank"],["title","image"]],[[8,"href",4]],null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,0,"img",[["class","ui bordered small image"]],[[8,"src",4]],null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,M)),t["\u0275did"](4,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](5,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),t["\u0275ted"](6,null,["",""]))],function(l,n){l(n,4,0,n.parent.context.$implicit.loading)},function(l,n){l(n,0,0,t["\u0275inlineInterpolate"](1,"",n.parent.context.$implicit.property_url,"")),l(n,2,0,t["\u0275inlineInterpolate"](1,"",n.parent.context.$implicit.image,"")),l(n,6,0,n.parent.context.$implicit.message)})}function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"span",[["class","time"]],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""])),t["\u0275ppd"](2,1)],null,function(l,n){l(n,1,0,t["\u0275unv"](n,1,0,l(n,2,0,t["\u0275nov"](n.parent.parent,0),n.parent.context.$implicit.updated_at)))})}function $(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"span",[["class","time"]],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",", ",""])),t["\u0275ppd"](2,2),t["\u0275ppd"](3,1),t["\u0275ppd"](4,2)],null,function(l,n){l(n,1,0,t["\u0275unv"](n,1,0,l(n,3,0,t["\u0275nov"](n.parent.parent,1),t["\u0275unv"](n,1,0,l(n,2,0,t["\u0275nov"](n.parent.parent,2),n.parent.context.$implicit.updated_at,"h:mm a")))),t["\u0275unv"](n,1,1,l(n,4,0,t["\u0275nov"](n.parent.parent,2),n.parent.context.$implicit.updated_at,"MMM d y")))})}function S(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"span",[["class","time"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"strong",[],null,null,null,null,null)),(l()(),t["\u0275ted"](2,null,["By - ",""])),t["\u0275ppd"](3,1)],null,function(l,n){l(n,2,0,null!=n.parent.context.$implicit&&null!=n.parent.context.$implicit.conversation_user&&null!=n.parent.context.$implicit.conversation_user.user&&n.parent.context.$implicit.conversation_user.user.name?null==n.parent.context.$implicit?null:null==n.parent.context.$implicit.conversation_user?null:null==n.parent.context.$implicit.conversation_user.user?null:n.parent.context.$implicit.conversation_user.user.name:t["\u0275unv"](n,2,0,l(n,3,0,t["\u0275nov"](n.parent.parent,3),null==n.parent.context.$implicit?null:null==n.parent.context.$implicit.conversation_user?null:null==n.parent.context.$implicit.conversation_user.admin?null:n.parent.context.$implicit.conversation_user.admin.name)))})}function B(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,19,"div",[["class","chat-user"]],null,null,null,null,null)),t["\u0275did"](1,278528,null,0,a.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,f)),t["\u0275did"](3,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,_)),t["\u0275did"](5,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,I)),t["\u0275did"](7,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,b)),t["\u0275did"](9,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,C)),t["\u0275did"](11,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,k)),t["\u0275did"](13,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,R)),t["\u0275did"](15,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,$)),t["\u0275did"](17,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,S)),t["\u0275did"](19,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,1,0,"chat-user",(null==n.context.$implicit?null:null==n.context.$implicit.conversation_user?null:n.context.$implicit.conversation_user.admin_id)==e.admin_id?"chat-user-one":"chat-user-two"),l(n,3,0,1==n.context.$implicit.message_type),l(n,5,0,2==n.context.$implicit.message_type),l(n,7,0,3==n.context.$implicit.message_type&&!n.context.$implicit.play),l(n,9,0,3==n.context.$implicit.message_type&&n.context.$implicit.play),l(n,11,0,4==n.context.$implicit.message_type),l(n,13,0,5==n.context.$implicit.message_type),l(n,15,0,n.context.$implicit.updated_at&&n.context.$implicit.id),l(n,17,0,n.context.$implicit.updated_at&&!n.context.$implicit.id),l(n,19,0,(null==n.context.$implicit?null:null==n.context.$implicit.conversation_user?null:n.context.$implicit.conversation_user.admin_id)!=e.admin_id)},null)}function L(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,[[1,0],["optionsButton",1]],null,1,"a",[["class","dropdown-toggle"],["data-toggle","dropdown"],["href","javascript://"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-paperclip"]],null,null,null,null,null))],null,null)}function E(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"a",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-paperclip"]],null,null,null,null,null))],null,null)}function D(l){return t["\u0275vid"](0,[t["\u0275pid"](0,i.a,[]),t["\u0275pid"](0,a.LowerCasePipe,[]),t["\u0275pid"](0,a.DatePipe,[t.LOCALE_ID]),t["\u0275pid"](0,a.TitleCasePipe,[]),t["\u0275qud"](671088640,1,{optionsButton:0}),t["\u0275qud"](402653184,2,{msgInput:0}),(l()(),t["\u0275eld"](6,0,null,null,52,"div",[["class","white-bg move-below"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,4,"div",[["class","page-title-3 marginB0"]],null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,3,"h4",[],null,null,null,null,null)),(l()(),t["\u0275eld"](9,0,null,null,1,"i",[],null,null,null,null,null)),(l()(),t["\u0275eld"](10,0,null,null,0,"img",[["alt","img"],["src","assets/img/chat-icon.png"]],null,null,null,null,null)),(l()(),t["\u0275ted"](11,null,[" Chat with ",""])),(l()(),t["\u0275eld"](12,0,null,null,6,"div",[["class","cust-tabs-4"]],null,null,null,null,null)),(l()(),t["\u0275eld"](13,0,null,null,5,"div",[["class","chat-area scrollbox"],["malihu-scrollbar",""],["style","height: 704px; width: 429px; padding-right: 17px; outline: none; overflow: hidden;"]],null,null,null,null,null)),t["\u0275did"](14,4341760,null,0,u.a,[t.ElementRef,u.c],{scrollbarOptions:[0,"scrollbarOptions"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,g)),t["\u0275did"](16,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,B)),t["\u0275did"](18,278528,null,0,a.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275eld"](19,0,null,null,4,"div",[["style","position: absolute; z-index: 1; margin: 0px; padding: 0px; other: block; left: 581px; top: 91px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](20,0,null,null,3,"div",[["class","enscroll-track track3"],["style","position: relative; height: 367px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](21,0,null,null,2,"a",[["class","handle3"],["href",""],["style","position: absolute; z-index: 1; height: 199.244px; top: 0px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](22,0,null,null,0,"div",[["class","top"]],null,null,null,null,null)),(l()(),t["\u0275eld"](23,0,null,null,0,"div",[["class","bottom"]],null,null,null,null,null)),(l()(),t["\u0275eld"](24,0,null,null,34,"div",[["class","chat-text"]],null,null,null,null,null)),(l()(),t["\u0275eld"](25,0,null,null,23,"div",[["class","dropdown attach-items"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,L)),t["\u0275did"](27,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),t["\u0275and"](0,[["noPermissiom",2]],null,0,null,E)),(l()(),t["\u0275eld"](29,0,null,null,19,"div",[["class","dropdown-menu"]],null,null,null,null,null)),(l()(),t["\u0275eld"](30,0,null,null,4,"div",[["class","dropdown-item"]],null,null,null,null,null)),(l()(),t["\u0275eld"](31,0,null,null,0,"input",[["accept","image/*"],["name","image"],["type","file"]],null,[[null,"change"]],function(l,n,e){var t=!0;return"change"===n&&(t=!1!==l.component.onSelectFile("image",e)&&t),t},null,null)),(l()(),t["\u0275eld"](32,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-camera"]],null,null,null,null,null)),(l()(),t["\u0275eld"](33,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Photo"])),(l()(),t["\u0275eld"](35,0,null,null,4,"a",[["class","dropdown-item"]],null,null,null,null,null)),(l()(),t["\u0275eld"](36,0,null,null,0,"input",[["accept","video/mp4,video/x-m4v,video/*"],["name","video1"],["type","file"]],null,[[null,"change"]],function(l,n,e){var t=!0;return"change"===n&&(t=!1!==l.component.showCanvas(e)&&t),t},null,null)),(l()(),t["\u0275eld"](37,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-video-camera"]],null,null,null,null,null)),(l()(),t["\u0275eld"](38,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Video"])),(l()(),t["\u0275eld"](40,0,null,null,4,"a",[["class","dropdown-item"]],null,null,null,null,null)),(l()(),t["\u0275eld"](41,0,null,null,0,"input",[["accept",".doc,.docx,.xml,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf"],["name","attachment"],["type","file"]],null,[[null,"change"]],function(l,n,e){var t=!0;return"change"===n&&(t=!1!==l.component.saveAttachment(e)&&t),t},null,null)),(l()(),t["\u0275eld"](42,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-file"]],null,null,null,null,null)),(l()(),t["\u0275eld"](43,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Document"])),(l()(),t["\u0275eld"](45,0,null,null,3,"a",[["class","dropdown-item cursor-pointer"]],null,[[null,"click"]],function(l,n,e){var a=!0;return"click"===n&&(a=!1!==t["\u0275nov"](l,60).showModal()&&a),a},null,null)),(l()(),t["\u0275eld"](46,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-file"]],null,null,null,null,null)),(l()(),t["\u0275eld"](47,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Property"])),(l()(),t["\u0275eld"](49,0,[[2,0],["msgInput",1]],null,5,"input",[["autocomplete","off"],["class","chat-input"],["id","message"],["name","message"],["placeholder","Type your message here \u2026"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var a=!0,i=l.component;return"input"===n&&(a=!1!==t["\u0275nov"](l,50)._handleInput(e.target.value)&&a),"blur"===n&&(a=!1!==t["\u0275nov"](l,50).onTouched()&&a),"compositionstart"===n&&(a=!1!==t["\u0275nov"](l,50)._compositionStart()&&a),"compositionend"===n&&(a=!1!==t["\u0275nov"](l,50)._compositionEnd(e.target.value)&&a),"ngModelChange"===n&&(a=!1!==(i.textMessage=e)&&a),"keyup.enter"===n&&(a=!1!==i.setText()&&a),a},null,null)),t["\u0275did"](50,16384,null,0,s.DefaultValueAccessor,[t.Renderer2,t.ElementRef,[2,s.COMPOSITION_BUFFER_MODE]],null,null),t["\u0275prd"](1024,null,s.NG_VALUE_ACCESSOR,function(l){return[l]},[s.DefaultValueAccessor]),t["\u0275did"](52,671744,null,0,s.NgModel,[[8,null],[8,null],[8,null],[6,s.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,s.NgControl,null,[s.NgModel]),t["\u0275did"](54,16384,null,0,s.NgControlStatus,[[4,s.NgControl]],null,null),(l()(),t["\u0275eld"](55,0,null,null,0,"video",[["autoplay",""],["class","video55"],["controls",""],["style","width: 100%; height: 100%;"],["type","video/mp4"]],[[8,"src",4]],null,null,null,null)),(l()(),t["\u0275eld"](56,0,null,null,0,"canvas",[["height","600"],["id","canvas"],["style","display: none;"],["width","800"]],null,null,null,null,null)),(l()(),t["\u0275eld"](57,0,null,null,1,"button",[["class","btn"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.setText()&&t),t},null,null)),(l()(),t["\u0275ted"](-1,null,["Send"])),(l()(),t["\u0275eld"](59,0,null,null,1,"app-block-get-property",[],null,[[null,"itemSelect"]],function(l,n,e){var t=!0;return"itemSelect"===n&&(t=!1!==l.component.sendProperty(e)&&t),t},o.b,o.a)),t["\u0275did"](60,114688,[["blockGetProperty",4]],0,r.a,[d.a,c.a],null,{itemSelect:"itemSelect"})],function(l,n){var e=n.component;l(n,14,0,e.scrollbarOptions),l(n,16,0,e.loadmore),l(n,18,0,e.parameter.messages),l(n,27,0,e.sent_as==e.constant.userType.csr_buyer&&(1==(null==e.admin?null:null==e.admin.admin_acl["Buyer Lead Management"]?null:e.admin.admin_acl["Buyer Lead Management"].can_update)||1==(null==e.admin?null:null==e.admin.permissions?null:e.admin.permissions.can_csr_buyer))||e.sent_as==e.constant.userType.inhouse_broker&&(1==(null==e.admin?null:null==e.admin.admin_acl["Broker Lead Management"]?null:e.admin.admin_acl["Broker Lead Management"].can_update)||1==(null==e.admin?null:null==e.admin.permissions?null:e.admin.permissions.can_in_house_broker))||e.sent_as==e.constant.userType.notary&&(1==(null==e.admin?null:null==e.admin.admin_acl["Notary Lead Management"]?null:e.admin.admin_acl["Notary Lead Management"].can_update)||1==(null==e.admin?null:null==e.admin.permissions?null:e.admin.permissions.can_noatary))||e.sent_as==e.constant.userType.bank&&(1==(null==e.admin?null:null==e.admin.admin_acl["Bank Lead Management"]?null:e.admin.admin_acl["Bank Lead Management"].can_update)||1==(null==e.admin?null:null==e.admin.permissions?null:e.admin.permissions.can_bank)),t["\u0275nov"](n,28)),l(n,52,0,"message",e.textMessage),l(n,60,0)},function(l,n){var e=n.component;l(n,11,0,3==e.other_sent_as?"CSR Closure":""),l(n,49,0,t["\u0275nov"](n,54).ngClassUntouched,t["\u0275nov"](n,54).ngClassTouched,t["\u0275nov"](n,54).ngClassPristine,t["\u0275nov"](n,54).ngClassDirty,t["\u0275nov"](n,54).ngClassValid,t["\u0275nov"](n,54).ngClassInvalid,t["\u0275nov"](n,54).ngClassPending),l(n,55,0,t["\u0275inlineInterpolate"](1,"",e.videoSrc,"")),l(n,57,0,e.sent_as==e.constant.userType.csr_buyer&&(0==(null==e.admin?null:null==e.admin.admin_acl["Buyer Lead Management"]?null:e.admin.admin_acl["Buyer Lead Management"].can_update)||0==(null==e.admin?null:null==e.admin.permissions?null:e.admin.permissions.can_csr_buyer))||e.sent_as==e.constant.userType.inhouse_broker&&(0==(null==e.admin?null:null==e.admin.admin_acl["Broker Lead Management"]?null:e.admin.admin_acl["Broker Lead Management"].can_update)||0==(null==e.admin?null:null==e.admin.permissions?null:e.admin.permissions.can_in_house_broker))||e.sent_as==e.constant.userType.notary&&(0==(null==e.admin?null:null==e.admin.admin_acl["Notary Lead Management"]?null:e.admin.admin_acl["Notary Lead Management"].can_update)||0==(null==e.admin?null:null==e.admin.permissions?null:e.admin.permissions.can_noatary))||e.sent_as==e.constant.userType.bank&&(0==(null==e.admin?null:null==e.admin.admin_acl["Bank Lead Management"]?null:e.admin.admin_acl["Bank Lead Management"].can_update)||0==(null==e.admin?null:null==e.admin.permissions?null:e.admin.permissions.can_bank)))})}}}]);